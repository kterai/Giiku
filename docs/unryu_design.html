<!DOCTYPE html><html lang="ja" data-__embeded-gyazo-content-j-s="5.13.0" data-__gyazo-expander-enabled="true"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="cid:css-7d9bf4f9-1fcb-4203-9d5b-4358244fdcea@mhtml.blink" /><link rel="stylesheet" type="text/css" href="cid:css-de538de0-4565-4e22-a6c5-c7e7dd56fcb8@mhtml.blink" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>技育システム - エンタープライズ級完全設計書 v2.0</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white py-8">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-4xl font-bold mb-2">技育システム</h1>
                    <p class="text-xl opacity-90">社内申請書類管理システム - エンタープライズ級完全設計書 v2.0</p>
                    <p class="mt-2">本書はシステム全体の設計方針と主要機能の実装手順を説明するドキュメントです。設計から運用までの流れを段階的に確認できます。</p>
                </div>
                <div class="text-right">
                    <p class="text-lg font-semibold">株式会社アプサ</p>
                    <p class="opacity-80">APSA Co.,Ltd.</p>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-6 py-8">
        <!-- 目次 -->
        <nav class="bg-white rounded-lg card-shadow p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-gray-800"><i class="fas fa-list mr-2"></i>目次</h2>
            <div class="grid md:grid-cols-2 gap-4">
                <ul class="space-y-2">
                    <li><a href="https://www.genspark.ai/api/page_private?id=lmlusuns#overview" class="text-blue-600 hover:underline">1. システム概要</a></li>
                    <li><a href="https://www.genspark.ai/api/page_private?id=lmlusuns#architecture" class="text-blue-600 hover:underline">2. アーキテクチャ設計</a></li>
                    <li><a href="https://www.genspark.ai/api/page_private?id=lmlusuns#logging" class="text-blue-600 hover:underline">3. ログ・監査機能</a></li>
                    <li><a href="https://www.genspark.ai/api/page_private?id=lmlusuns#approval-flow" class="text-blue-600 hover:underline">4. 承認フロー設計</a></li>
                    <li><a href="https://www.genspark.ai/api/page_private?id=lmlusuns#database" class="text-blue-600 hover:underline">5. データベース設計</a></li>
                </ul>
                <ul class="space-y-2">
                    <li><a href="https://www.genspark.ai/api/page_private?id=lmlusuns#testing" class="text-blue-600 hover:underline">6. テスト・品質管理</a></li>
                    <li><a href="https://www.genspark.ai/api/page_private?id=lmlusuns#documentation" class="text-blue-600 hover:underline">7. ドキュメント自動生成</a></li>
                    <li><a href="https://www.genspark.ai/api/page_private?id=lmlusuns#training" class="text-blue-600 hover:underline">8. 新人研修対応設計</a></li>
                    <li><a href="https://www.genspark.ai/api/page_private?id=lmlusuns#project-structure" class="text-blue-600 hover:underline">9. プロジェクト構成</a></li>
                    <li><a href="https://www.genspark.ai/api/page_private?id=lmlusuns#implementation" class="text-blue-600 hover:underline">10. 実装サンプル</a></li>
                </ul>
            </div>
        </nav>

        <!-- 1. システム概要 -->
        <section id="overview" class="bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-gray-800"><i class="fas fa-clipboard-list mr-3"></i>1. システム概要</h2>
            
            <div class="grid lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">システムの目的</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li><i class="fas fa-check text-green-500 mr-2"></i>既存Excel管理からの脱却</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>多様な申請書類の統一管理</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>柔軟な承認フローの実現</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>完全な監査ログ記録</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>新人エンジニア研修プラットフォーム</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">技術スタック</h3>
                    <div class="space-y-3">
                        <div class="bg-gray-100 p-3 rounded">
                            <strong>Backend:</strong> Java 17 + Spring Boot 3.1.3 + Spring Security
                        </div>
                        <div class="bg-gray-100 p-3 rounded">
                            <strong>Frontend:</strong> React 19.1 + Bootstrap 5.3 + Thymeleaf
                        </div>
                        <div class="bg-gray-100 p-3 rounded">
                            <strong>Database:</strong> PostgreSQL 15 + Spring Data JPA
                        </div>
                        <div class="bg-gray-100 p-3 rounded">
                            <strong>Build:</strong> Gradle (Groovy) + Lombok + Tomcat 11
                        </div>
                        <div class="bg-gray-100 p-3 rounded">
                            <strong>Logging:</strong> SLF4J + Logback + DB記録
                        </div>
                    </div>
                </div>
            </div>

            <hr class="section-divider">

            <div class="bg-blue-50 p-6 rounded-lg">
                <h3 class="text-xl font-semibold mb-4 text-blue-800"><i class="fas fa-lightbulb mr-2"></i>設計コンセプト</h3>
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="text-center">
                        <i class="fas fa-expand-arrows-alt text-3xl text-blue-500 mb-2"></i>
                        <h4 class="font-semibold">拡張性</h4>
                        <p class="text-sm text-gray-700">新しい申請書式を容易に追加</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-shield-alt text-3xl text-green-500 mb-2"></i>
                        <h4 class="font-semibold">保守性</h4>
                        <p class="text-sm text-gray-700">Hexagonal Architecture採用</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-graduation-cap text-3xl text-purple-500 mb-2"></i>
                        <h4 class="font-semibold">教育性</h4>
                        <p class="text-sm text-gray-700">新人研修を考慮した設計</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. アーキテクチャ設計 -->
        <section id="architecture" class="bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-gray-800"><i class="fas fa-sitemap mr-3"></i>2. アーキテクチャ設計</h2>
            
            <div class="architecture-diagram mb-8">
                <h3 class="text-xl font-semibold mb-4 text-center">Hexagonal Architecture + CQRS</h3>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="bg-blue-100 p-4 rounded-lg text-center">
                        <i class="fas fa-globe text-3xl text-blue-600 mb-2"></i>
                        <h4 class="font-semibold text-blue-800">Adapters (外側)</h4>
                        <ul class="text-sm mt-2 space-y-1">
                            <li>REST API</li>
                            <li>Web UI (Thymeleaf/React)</li>
                            <li>Database (PostgreSQL)</li>
                            <li>Slack Webhook</li>
                            <li>File Storage</li>
                        </ul>
                    </div>
                    <div class="bg-green-100 p-4 rounded-lg text-center">
                        <i class="fas fa-cogs text-3xl text-green-600 mb-2"></i>
                        <h4 class="font-semibold text-green-800">Application Layer</h4>
                        <ul class="text-sm mt-2 space-y-1">
                            <li>Command Handlers</li>
                            <li>Query Handlers</li>
                            <li>Event Handlers</li>
                            <li>Use Cases</li>
                        </ul>
                    </div>
                    <div class="bg-purple-100 p-4 rounded-lg text-center">
                        <i class="fas fa-heart text-3xl text-purple-600 mb-2"></i>
                        <h4 class="font-semibold text-purple-800">Domain (中心)</h4>
                        <ul class="text-sm mt-2 space-y-1">
                            <li>Entities</li>
                            <li>Value Objects</li>
                            <li>Domain Services</li>
                            <li>Repositories (Interface)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">パッケージ構成</h3>
                    <div class="code-block p-4 font-mono text-sm">
                        <pre>jp.co.apsa.giiku/
├── domain/
│   ├── application/     # 申請ドメイン
│   ├── user/           # ユーザードメイン
│   ├── approval/       # 承認ドメイン
│   └── common/         # 共通ドメイン
├── application/
│   ├── command/        # コマンド処理
│   ├── query/          # クエリ処理
│   └── event/          # イベント処理
├── infrastructure/
│   ├── persistence/    # DB永続化
│   ├── web/           # Web層
│   ├── notification/  # 通知
│   └── logging/       # ログ記録
└── config/            # 設定</pre>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">CQRS実装方針</h3>
                    <div class="space-y-4">
                        <div class="border-l-4 border-blue-500 pl-4">
                            <h4 class="font-semibold">Command (書き込み)</h4>
                            <p class="text-sm text-gray-600">申請提出、承認処理、状態変更など</p>
                        </div>
                        <div class="border-l-4 border-green-500 pl-4">
                            <h4 class="font-semibold">Query (読み込み)</h4>
                            <p class="text-sm text-gray-600">申請一覧、詳細表示、レポートなど</p>
                        </div>
                        <div class="border-l-4 border-purple-500 pl-4">
                            <h4 class="font-semibold">Event (イベント)</h4>
                            <p class="text-sm text-gray-600">ログ記録、通知送信、監査記録など</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. ログ・監査機能 -->
        <section id="logging" class="bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-gray-800"><i class="fas fa-file-alt mr-3"></i>3. ログ・監査機能</h2>
            
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">DB監査ログ設計</h3>
                <div class="grid lg:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-3">監査ログテーブル</h4>
                        <div class="code-block p-4 font-mono text-sm">
                            <pre>-- 監査ログテーブル
CREATE TABLE audit_logs (
    id BIGSERIAL PRIMARY KEY,
    event_type VARCHAR(50) NOT NULL, -- 'APPLICATION_SUBMIT', 'APPROVAL_PROCESS'等
    entity_type VARCHAR(50) NOT NULL, -- 'APPLICATION', 'USER'等
    entity_id BIGINT NOT NULL,
    old_values JSONB, -- 変更前データ
    new_values JSONB, -- 変更後データ
    user_id BIGINT NOT NULL,
    ip_address INET,
    user_agent TEXT,
    session_id VARCHAR(100),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE audit_logs IS '監査ログ';
COMMENT ON COLUMN audit_logs.event_type IS 'イベント種別';
COMMENT ON COLUMN audit_logs.entity_type IS 'エンティティ種別';
COMMENT ON COLUMN audit_logs.entity_id IS 'エンティティID';
COMMENT ON COLUMN audit_logs.old_values IS '変更前データ(JSON)';
COMMENT ON COLUMN audit_logs.new_values IS '変更後データ(JSON)';</pre>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-3">自動監査実装</h4>
                        <div class="code-block p-4 font-mono text-sm">
                            <pre>/**
 * 監査ログ自動記録アスペクト
 * @author APSA Co.,Ltd.
 */
@Aspect
@Component
@Slf4j
public class AuditLoggingAspect {
    
    @Autowired
    private AuditLogRepository auditLogRepository;
    
    /**
     * エンティティ変更時の監査ログ記録
     */
    @AfterReturning(pointcut = "@annotation(Auditable)", 
                   returning = "result")
    public void logAuditEvent(JoinPoint joinPoint, 
                             Object result) {
        // 自動監査ログ記録
        recordAuditLog(joinPoint, result);
    }
}</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">Logback設定 (logback-spring.xml)</h3>
                <div class="code-block p-4 font-mono text-sm">
                    <pre>&lt;!-- 
  技育システム ログ設定
  Copyright (c) 2024 APSA Co.,Ltd. All rights reserved.
--&gt;
&lt;configuration&gt;
    &lt;!-- DB Appender for Audit Logs --&gt;
    &lt;appender name="DB" class="ch.qos.logback.classic.db.DBAppender"&gt;
        &lt;connectionSource class="ch.qos.logback.core.db.DataSourceConnectionSource"&gt;
            &lt;dataSource class="org.springframework.jdbc.datasource.lookup.JndiDataSourceLookup"&gt;
                &lt;jndiName&gt;java:comp/env/jdbc/giiku&lt;/jndiName&gt;
            &lt;/dataSource&gt;
        &lt;/connectionSource&gt;
    &lt;/appender&gt;

    &lt;!-- Structured JSON Logging --&gt;
    &lt;appender name="JSON_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;file&gt;logs/giiku.json&lt;/file&gt;
        &lt;encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder"&gt;
            &lt;providers&gt;
                &lt;timestamp/&gt;
                &lt;logLevel/&gt;
                &lt;loggerName/&gt;
                &lt;message/&gt;
                &lt;mdc/&gt;
                &lt;stackTrace/&gt;
            &lt;/providers&gt;
        &lt;/encoder&gt;
        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;fileNamePattern&gt;logs/giiku.%d{yyyy-MM-dd}.json.gz&lt;/fileNamePattern&gt;
            &lt;maxHistory&gt;30&lt;/maxHistory&gt;
        &lt;/rollingPolicy&gt;
    &lt;/appender&gt;

    &lt;!-- Error Alert to Slack --&gt;
    &lt;appender name="SLACK_ERROR" class="jp.co.apsa.giiku.infrastructure.logging.SlackErrorAppender"&gt;
        &lt;webhookUrl&gt;${SLACK_WEBHOOK_URL}&lt;/webhookUrl&gt;
        &lt;channel&gt;#giiku-alerts&lt;/channel&gt;
        &lt;username&gt;giiku-system&lt;/username&gt;
        &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt;
            &lt;level&gt;ERROR&lt;/level&gt;
        &lt;/filter&gt;
    &lt;/appender&gt;

    &lt;logger name="jp.co.apsa.giiku" level="INFO" additivity="false"&gt;
        &lt;appender-ref ref="DB"/&gt;
        &lt;appender-ref ref="JSON_FILE"/&gt;
        &lt;appender-ref ref="SLACK_ERROR"/&gt;
    &lt;/logger&gt;
&lt;/configuration&gt;</pre>
                </div>
            </div>

            <div class="bg-red-50 p-6 rounded-lg">
                <h3 class="text-xl font-semibold mb-4 text-red-800"><i class="fas fa-exclamation-triangle mr-2"></i>Slack エラー通知</h3>
                <div class="code-block p-4 font-mono text-sm">
                    <pre>/**
 * Slack エラー通知アペンダー
 * エラー発生時に管理者に自動通知
 * 
 * @author APSA Co.,Ltd.
 * @since 1.0.0
 */
@Component
public class SlackErrorAppender extends AppenderBase&lt;ILoggingEvent&gt; {
    
    private String webhookUrl;
    private String channel;
    
    @Override
    protected void append(ILoggingEvent event) {
        if (event.getLevel().isGreaterOrEqual(Level.ERROR)) {
            sendSlackNotification(event);
        }
    }
    
    /**
     * Slack通知送信
     * @param event ログイベント
     */
    private void sendSlackNotification(ILoggingEvent event) {
        SlackMessage message = SlackMessage.builder()
            .channel(channel)
            .username("技育システム")
            .iconEmoji(":warning:")
            .text(String.format(":rotating_light: *エラー発生* :rotating_light:\n" +
                               "```\n%s\n```\n" +
                               "*時刻:* %s\n" +
                               "*ユーザー:* %s",
                               event.getFormattedMessage(),
                               event.getTimeStamp(),
                               MDC.get("userId")))
            .build();
            
        slackClient.sendMessage(message);
    }
}</pre>
                </div>
            </div>
        </section>

        <!-- 4. 承認フロー設計 -->
        <section id="approval-flow" class="bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-gray-800"><i class="fas fa-route mr-3"></i>4. 承認フロー設計</h2>
            
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">柔軟な承認ルート設計</h3>
                <div class="grid lg:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-3">承認フローマスタ</h4>
                        <div class="code-block p-4 font-mono text-sm">
                            <pre>-- 承認フローマスタ
CREATE TABLE approval_flows (
    id BIGSERIAL PRIMARY KEY,
    application_type_id BIGINT NOT NULL, -- 申請種別ID
    department_id BIGINT, -- 部署ID（null=全部署共通）
    flow_name VARCHAR(100) NOT NULL, -- フロー名
    description TEXT, -- 説明
    is_active BOOLEAN DEFAULT true, -- 有効フラグ
    display_order INTEGER DEFAULT 0, -- 表示順
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- 承認ステップマスタ
CREATE TABLE approval_steps (
    id BIGSERIAL PRIMARY KEY,
    approval_flow_id BIGINT NOT NULL, -- 承認フローID
    step_order INTEGER NOT NULL, -- ステップ順序
    step_name VARCHAR(100) NOT NULL, -- ステップ名
    approver_type VARCHAR(20) NOT NULL, -- 'DIRECT_MANAGER', 'DEPARTMENT_HEAD', 'FIXED_USER', 'ROLE'
    approver_condition JSONB, -- 承認者条件（JSON）
    is_confirmation_only BOOLEAN DEFAULT false, -- 確認のみフラグ
    is_parallel BOOLEAN DEFAULT false, -- 並列承認フラグ
    timeout_hours INTEGER, -- タイムアウト時間
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);</pre>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-3">承認フロー例</h4>
                        <div class="space-y-4">
                            <div class="border border-gray-200 rounded p-4">
                                <h5 class="font-semibold text-green-600">経費申請フロー</h5>
                                <div class="flex items-center space-x-2 mt-2">
                                    <div class="flow-step">1</div>
                                    <span>→</span>
                                    <div class="flow-step">2</div>
                                    <span>→</span>
                                    <div class="flow-step">3</div>
                                    <span>→</span>
                                    <div class="flow-step">4</div>
                                </div>
                                <div class="text-sm mt-2 space-y-1">
                                    <div>1. 直属上司承認</div>
                                    <div>2. 部長承認</div>
                                    <div>3. 経理部承認</div>
                                    <div>4. 総務部確認</div>
                                </div>
                            </div>
                            <div class="border border-gray-200 rounded p-4">
                                <h5 class="font-semibold text-blue-600">有給申請フロー</h5>
                                <div class="flex items-center space-x-2 mt-2">
                                    <div class="flow-step">1</div>
                                    <span>→</span>
                                    <div class="flow-step">2</div>
                                </div>
                                <div class="text-sm mt-2 space-y-1">
                                    <div>1. 直属上司承認</div>
                                    <div>2. 人事部確認</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">動的承認ルート実装</h3>
                <div class="code-block p-4 font-mono text-sm">
                    <pre>/**
 * 承認フロー決定サービス
 * 申請種別・部署・役職に基づいて適切な承認ルートを決定
 * 
 * @author APSA Co.,Ltd.
 * @since 1.0.0
 */
@Service
@Transactional(readOnly = true)
@Slf4j
public class ApprovalFlowService {
    
    private final ApprovalFlowRepository approvalFlowRepository;
    private final OrganizationService organizationService;
    
    /**
     * 承認フローを決定する
     * 新人エンジニア向け：この処理の流れを理解することで
     * ビジネスルールの実装方法を学習できます
     * 
     * @param applicationType 申請種別
     * @param applicantUser 申請者
     * @return 承認フロー
     */
    @Auditable(eventType = "APPROVAL_FLOW_DETERMINED")
    public ApprovalFlow determineApprovalFlow(ApplicationType applicationType, 
                                            User applicantUser) {
        
        log.info("承認フロー決定開始", 
                kv("applicationTypeId", applicationType.getId()),
                kv("applicantUserId", applicantUser.getId()));
        
        // 1. 部署・申請種別による基本フロー取得
        ApprovalFlow baseFlow = approvalFlowRepository
            .findByApplicationTypeAndDepartment(
                applicationType, 
                applicantUser.getDepartment());
        
        // 2. 申請者の役職・権限による調整
        ApprovalFlow adjustedFlow = adjustFlowByApplicantRole(
            baseFlow, applicantUser);
        
        // 3. 金額・条件による追加ステップ判定
        ApprovalFlow finalFlow = addConditionalSteps(
            adjustedFlow, applicationType);
        
        log.info("承認フロー決定完了", 
                kv("flowId", finalFlow.getId()),
                kv("stepCount", finalFlow.getSteps().size()));
        
        return finalFlow;
    }
    
    /**
     * 承認者を動的に決定
     * 組織図・代理設定を考慮した柔軟な承認者選定
     */
    public List&lt;User&gt; determineApprovers(ApprovalStep step, 
                                        User applicant) {
        
        switch (step.getApproverType()) {
            case DIRECT_MANAGER:
                return findDirectManagers(applicant);
            case DEPARTMENT_HEAD:
                return findDepartmentHeads(applicant.getDepartment());
            case FIXED_USER:
                return findFixedUsers(step.getApproverCondition());
            case ROLE:
                return findUsersByRole(step.getApproverCondition());
            default:
                throw new IllegalArgumentException("未対応の承認者タイプ: " 
                    + step.getApproverType());
        }
    }
}</pre>
                </div>
            </div>
        </section>

        <!-- 5. データベース設計 -->
        <section id="database" class="bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-gray-800"><i class="fas fa-database mr-3"></i>5. データベース設計</h2>
            
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">完全DDLスクリプト</h3>
                <div class="code-block p-4 font-mono text-sm">
                    <pre>-- =====================================================
-- 技育システム データベース設計
-- Copyright (c) 2024 APSA Co.,Ltd. All rights reserved.
-- =====================================================

-- 共通監査カラム用関数
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ language 'plpgsql';

-- ユーザーマスタ
CREATE TABLE m_users (
    id BIGSERIAL PRIMARY KEY,
    login_id VARCHAR(50) UNIQUE NOT NULL, -- ログインID
    email VARCHAR(255) UNIQUE NOT NULL, -- メールアドレス
    password_hash VARCHAR(255), -- パスワードハッシュ
    employee_no VARCHAR(20) UNIQUE, -- 社員番号
    last_name VARCHAR(50) NOT NULL, -- 姓
    first_name VARCHAR(50) NOT NULL, -- 名
    last_name_kana VARCHAR(50), -- 姓カナ
    first_name_kana VARCHAR(50), -- 名カナ
    department_id BIGINT, -- 部署ID
    position_id BIGINT, -- 役職ID
    manager_user_id BIGINT, -- 上司ユーザーID
    google_id VARCHAR(100), -- Google OAuth ID
    slack_id VARCHAR(50), -- Slack ID
    phone VARCHAR(20), -- 電話番号
    extension VARCHAR(10), -- 内線番号
    hire_date DATE, -- 入社日
    is_active BOOLEAN DEFAULT true, -- 有効フラグ
    last_login_at TIMESTAMP WITH TIME ZONE, -- 最終ログイン日時
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE m_users IS 'ユーザーマスタ';
COMMENT ON COLUMN m_users.login_id IS 'ログインID';
COMMENT ON COLUMN m_users.email IS 'メールアドレス';
COMMENT ON COLUMN m_users.password_hash IS 'パスワードハッシュ';
COMMENT ON COLUMN m_users.employee_no IS '社員番号';
COMMENT ON COLUMN m_users.last_name IS '姓';
COMMENT ON COLUMN m_users.first_name IS '名';
COMMENT ON COLUMN m_users.slack_id IS 'SlackユーザーID';

-- 部署マスタ
CREATE TABLE m_departments (
    id BIGSERIAL PRIMARY KEY,
    department_code VARCHAR(20) UNIQUE NOT NULL, -- 部署コード
    department_name VARCHAR(100) NOT NULL, -- 部署名
    parent_department_id BIGINT, -- 親部署ID
    department_level INTEGER DEFAULT 1, -- 部署レベル
    manager_user_id BIGINT, -- 部署長ユーザーID
    display_order INTEGER DEFAULT 0, -- 表示順
    is_active BOOLEAN DEFAULT true, -- 有効フラグ
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE m_departments IS '部署マスタ';
COMMENT ON COLUMN m_departments.department_code IS '部署コード';
COMMENT ON COLUMN m_departments.department_name IS '部署名';

-- 申請種別マスタ
CREATE TABLE m_application_types (
    id BIGSERIAL PRIMARY KEY,
    type_code VARCHAR(50) UNIQUE NOT NULL, -- 申請種別コード
    type_name VARCHAR(100) NOT NULL, -- 申請種別名
    description TEXT, -- 説明
    form_config JSONB NOT NULL, -- フォーム設定（動的フィールド）
    is_file_attachable BOOLEAN DEFAULT false, -- ファイル添付可能フラグ
    max_attach_files INTEGER DEFAULT 0, -- 最大添付ファイル数
    approval_flow_id BIGINT, -- デフォルト承認フローID
    is_active BOOLEAN DEFAULT true, -- 有効フラグ
    display_order INTEGER DEFAULT 0, -- 表示順
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE m_application_types IS '申請種別マスタ';
COMMENT ON COLUMN m_application_types.form_config IS 'フォーム設定(JSON)';

-- 申請テーブル
CREATE TABLE t_applications (
    id BIGSERIAL PRIMARY KEY,
    application_no VARCHAR(50) UNIQUE NOT NULL, -- 申請番号
    application_type_id BIGINT NOT NULL, -- 申請種別ID
    applicant_user_id BIGINT NOT NULL, -- 申請者ユーザーID
    title VARCHAR(200) NOT NULL, -- 申請タイトル
    content TEXT, -- 申請内容
    form_data JSONB, -- フォームデータ（動的データ）
    status VARCHAR(20) DEFAULT 'DRAFT', -- ステータス
    current_step INTEGER DEFAULT 0, -- 現在ステップ
    submitted_at TIMESTAMP WITH TIME ZONE, -- 提出日時
    completed_at TIMESTAMP WITH TIME ZONE, -- 完了日時
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

COMMENT ON TABLE t_applications IS '申請テーブル';
COMMENT ON COLUMN t_applications.form_data IS 'フォームデータ(JSON)';

-- 承認履歴テーブル
CREATE TABLE t_approval_histories (
    id BIGSERIAL PRIMARY KEY,
    application_id BIGINT NOT NULL, -- 申請ID
    step_order INTEGER NOT NULL, -- ステップ順序
    approver_user_id BIGINT NOT NULL, -- 承認者ユーザーID
    action VARCHAR(20) NOT NULL, -- アクション（APPROVED, REJECTED, RETURNED）
    comment TEXT, -- コメント
    approved_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, -- 承認日時
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- 添付ファイルテーブル
CREATE TABLE t_attachment_files (
    id BIGSERIAL PRIMARY KEY,
    application_id BIGINT NOT NULL, -- 申請ID
    original_filename VARCHAR(255) NOT NULL, -- 元ファイル名
    stored_filename VARCHAR(255) NOT NULL, -- 保存ファイル名
    file_path VARCHAR(500) NOT NULL, -- ファイルパス
    file_size BIGINT NOT NULL, -- ファイルサイズ
    content_type VARCHAR(100), -- コンテンツタイプ
    upload_user_id BIGINT NOT NULL, -- アップロードユーザーID
    created_by BIGINT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_by BIGINT NOT NULL,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- トリガー設定（自動更新日時）
CREATE TRIGGER update_m_users_updated_at BEFORE UPDATE ON m_users 
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
CREATE TRIGGER update_m_departments_updated_at BEFORE UPDATE ON m_departments 
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
CREATE TRIGGER update_t_applications_updated_at BEFORE UPDATE ON t_applications 
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

-- インデックス作成
CREATE INDEX idx_applications_applicant ON t_applications(applicant_user_id);
CREATE INDEX idx_applications_type ON t_applications(application_type_id);
CREATE INDEX idx_applications_status ON t_applications(status);
CREATE INDEX idx_approval_histories_application ON t_approval_histories(application_id);
CREATE INDEX idx_users_department ON m_users(department_id);
CREATE INDEX idx_users_email ON m_users(email);
CREATE INDEX idx_users_slack_id ON m_users(slack_id);</pre>
                </div>
            </div>
        </section>

        <!-- 6. テスト・品質管理 -->
        <section id="testing" class="bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-gray-800"><i class="fas fa-vial mr-3"></i>6. テスト・品質管理</h2>
            
            <div class="grid lg:grid-cols-2 gap-8 mb-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">テスト構成</h3>
                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded p-4">
                            <h4 class="font-semibold text-green-600">単体テスト (Unit Tests)</h4>
                            <p class="text-sm text-gray-600 mt-1">JUnit 5 + Mockito + AssertJ</p>
                            <ul class="text-sm mt-2 space-y-1">
                                <li>• ドメインロジックテスト</li>
                                <li>• サービス層テスト</li>
                                <li>• リポジトリテスト</li>
                            </ul>
                        </div>
                        <div class="border border-gray-200 rounded p-4">
                            <h4 class="font-semibold text-blue-600">統合テスト</h4>
                            <p class="text-sm text-gray-600 mt-1">@SpringBootTest + TestContainers</p>
                            <ul class="text-sm mt-2 space-y-1">
                                <li>• API統合テスト</li>
                                <li>• データベース統合テスト</li>
                                <li>• セキュリティテスト</li>
                            </ul>
                        </div>
                        <div class="border border-gray-200 rounded p-4">
                            <h4 class="font-semibold text-purple-600">E2Eテスト</h4>
                            <p class="text-sm text-gray-600 mt-1">React Testing Library + Cypress</p>
                            <ul class="text-sm mt-2 space-y-1">
                                <li>• ユーザーシナリオテスト</li>
                                <li>• 承認フローテスト</li>
                                <li>• UI/UXテスト</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">Gradle設定</h3>
                    <div class="code-block p-4 font-mono text-sm">
                        <pre>// build.gradle
// Copyright (c) 2024 APSA Co.,Ltd.

plugins {
    id 'java'
    id 'org.springframework.boot' version '3.1.3'
    id 'io.spring.dependency-management' version '1.1.3'
    id 'jacoco' // カバレッジ測定
    id 'org.sonarqube' version '4.3.1' // 品質分析
    id 'com.github.spotbugs' version '5.1.3' // バグ検出
}

// テスト設定
test {
    useJUnitPlatform()
    finalizedBy jacocoTestReport
}

// JaCoCo設定
jacocoTestReport {
    dependsOn test
    reports {
        xml.required = true
        html.required = true
    }
}

// テストカバレッジ閾値
jacocoTestCoverageVerification {
    violationRules {
        rule {
            limit {
                counter = 'LINE'
                value = 'COVEREDRATIO'
                minimum = 0.80 // 80%以上
            }
        }
    }
}</pre>
                    </div>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">テスト実装例（新人研修用）</h3>
                <div class="code-block p-4 font-mono text-sm">
                    <pre>/**
 * 申請サービステスト
 * 新人エンジニア向けサンプル：テストの書き方を学習できます
 * 
 * @author APSA Co.,Ltd.
 * @since 1.0.0
 */
@ExtendWith(MockitoExtension.class)
@DisplayName("申請サービステスト")
class ApplicationServiceTest {
    
    @Mock
    private ApplicationRepository applicationRepository;
    
    @Mock
    private ApprovalFlowService approvalFlowService;
    
    @Mock
    private NotificationService notificationService;
    
    @InjectMocks
    private ApplicationService applicationService;
    
    /**
     * 申請提出正常系テスト
     * Given-When-Then パターンでテストを記述
     */
    @Test
    @DisplayName("申請提出が正常に完了すること")
    void submitApplication_Success() {
        // Given - テストデータ準備
        ApplicationSubmitCommand command = ApplicationSubmitCommand.builder()
            .applicantUserId(1L)
            .applicationTypeId(1L)
            .title("交通費申請")
            .content("出張交通費の申請")
            .formData(createTestFormData())
            .build();
        
        Application expectedApplication = createTestApplication();
        when(applicationRepository.save(any(Application.class)))
            .thenReturn(expectedApplication);
        
        // When - テスト実行
        ApplicationDto result = applicationService.submitApplication(command);
        
        // Then - 結果検証
        assertThat(result).isNotNull();
        assertThat(result.getTitle()).isEqualTo("交通費申請");
        assertThat(result.getStatus()).isEqualTo(ApplicationStatus.SUBMITTED);
        
        // モック呼び出し検証
        verify(applicationRepository, times(1)).save(any(Application.class));
        verify(notificationService, times(1)).sendSubmitNotification(any());
    }
    
    /**
     * 承認処理テスト
     * エラーケースも含めた包括的なテスト
     */
    @Test
    @DisplayName("承認処理が正常に完了すること")
    void approveApplication_Success() {
        // テスト実装...
    }
    
    /**
     * テストデータ作成ヘルパーメソッド
     * 新人向け：テストデータ作成のベストプラクティス
     */
    private Map&lt;String, Object&gt; createTestFormData() {
        Map&lt;String, Object&gt; formData = new HashMap&lt;&gt;();
        formData.put("amount", 3000);
        formData.put("purpose", "客先訪問");
        formData.put("date", "2024-01-15");
        return formData;
    }
}</pre>
                </div>
            </div>

            <div class="bg-green-50 p-6 rounded-lg">
                <h3 class="text-xl font-semibold mb-4 text-green-800"><i class="fas fa-chart-bar mr-2"></i>継続的品質改善</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="font-semibold mb-2">自動化されるチェック</h4>
                        <ul class="space-y-1 text-sm">
                            <li>• テストカバレッジ 80%以上</li>
                            <li>• SonarQube品質ゲート</li>
                            <li>• SpotBugsバグ検出</li>
                            <li>• Checkstyleコーディング規約</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2">CI/CDパイプライン</h4>
                        <ul class="space-y-1 text-sm">
                            <li>• プルリクエスト時自動テスト</li>
                            <li>• マージ時品質チェック</li>
                            <li>• デプロイ前統合テスト</li>
                            <li>• 本番デプロイ後スモークテスト</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 7. ドキュメント自動生成 -->
        <section id="documentation" class="bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-gray-800"><i class="fas fa-book mr-3"></i>7. ドキュメント自動生成</h2>
            
            <div class="grid lg:grid-cols-2 gap-8 mb-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">JavaDoc自動生成設定</h3>
                    <div class="code-block p-4 font-mono text-sm">
                        <pre>// build.gradle
// JavaDoc生成設定
javadoc {
    options.encoding = 'UTF-8'
    options.charSet = 'UTF-8'
    options.author = true
    options.version = true
    options.use = true
    options.windowTitle = "技育システム API仕様書"
    options.docTitle = "技育システム API仕様書 v${version}"
    options.bottom = """
        &lt;div style="text-align: center;"&gt;
        Copyright © 2024 APSA Co.,Ltd. All rights reserved.
        &lt;/div&gt;
    """
    
    // カスタムタグ定義
    options.tags = [
        'apiNote:a:API Note:',
        'implSpec:a:Implementation Requirements:',
        'implNote:a:Implementation Note:'
    ]
}

// ドキュメント生成タスク
task generateDocs {
    dependsOn javadoc
    dependsOn generateOpenApiDocs
    dependsOn generateArchDocs
    
    doLast {
        println "ドキュメント生成完了: build/docs/"
    }
}</pre>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">JavaDoc記述例</h3>
                    <div class="code-block p-4 font-mono text-sm">
                        <pre>/**
 * 申請管理サービス
 * &lt;p&gt;
 * 社内申請書類の提出・承認・管理を行うメインサービスクラスです。
 * Hexagonal ArchitectureのApplication Serviceレイヤーに位置し、
 * ドメインロジックを調整してユースケースを実現します。
 * &lt;/p&gt;
 * 
 * &lt;h3&gt;主な機能&lt;/h3&gt;
 * &lt;ul&gt;
 *   &lt;li&gt;申請書の新規作成・提出&lt;/li&gt;
 *   &lt;li&gt;承認・差し戻し処理&lt;/li&gt;
 *   &lt;li&gt;申請状況の照会&lt;/li&gt;
 * &lt;/ul&gt;
 * 
 * &lt;h3&gt;新人エンジニア向け学習ポイント&lt;/h3&gt;
 * &lt;p&gt;
 * このクラスを理解することで以下を学習できます：
 * &lt;/p&gt;
 * &lt;ul&gt;
 *   &lt;li&gt;トランザクション境界の設定方法&lt;/li&gt;
 *   &lt;li&gt;ドメインイベントの発行&lt;/li&gt;
 *   &lt;li&gt;例外ハンドリングのベストプラクティス&lt;/li&gt;
 * &lt;/ul&gt;
 * 
 * @author APSA Co.,Ltd.
 * @version 1.0.0
 * @since 2024-01-01
 * 
 * @see Application ドメインエンティティ
 * @see ApprovalFlow 承認フロー
 * @see NotificationService 通知サービス
 */
@Service
@Transactional
@Slf4j
public class ApplicationService {
    
    /**
     * 申請を提出します
     * &lt;p&gt;
     * 申請データの検証、承認フローの決定、初期承認者への通知を行います。
     * &lt;/p&gt;
     * 
     * @param command 申請提出コマンド
     * @return 提出された申請のDTO
     * 
     * @throws ValidationException 申請データが不正な場合
     * @throws BusinessException 業務ルール違反の場合
     * 
     * @apiNote このメソッドは冪等性を保証していません。
     *          重複提出を防ぐため、フロントエンドで制御してください。
     * 
     * @implNote 承認フローの決定は {@link ApprovalFlowService} に委譲しています。
     *           新しい申請種別を追加する際は、そちらを確認してください。
     */
    @Auditable(eventType = "APPLICATION_SUBMITTED")
    public ApplicationDto submitApplication(ApplicationSubmitCommand command) {
        // 実装...
    }
}</pre>
                    </div>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">自動生成ドキュメント種類</h3>
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="border border-gray-200 rounded p-4">
                        <h4 class="font-semibold text-blue-600 mb-2">
                            <i class="fas fa-code mr-2"></i>API仕様書
                        </h4>
                        <ul class="text-sm space-y-1">
                            <li>• OpenAPI 3.0形式</li>
                            <li>• Swagger UI対応</li>
                            <li>• リクエスト/レスポンス例</li>
                            <li>• 認証情報</li>
                        </ul>
                    </div>
                    <div class="border border-gray-200 rounded p-4">
                        <h4 class="font-semibold text-green-600 mb-2">
                            <i class="fas fa-sitemap mr-2"></i>アーキテクチャ文書
                        </h4>
                        <ul class="text-sm space-y-1">
                            <li>• PlantUMLクラス図</li>
                            <li>• シーケンス図</li>
                            <li>• ER図</li>
                            <li>• 依存関係図</li>
                        </ul>
                    </div>
                    <div class="border border-gray-200 rounded p-4">
                        <h4 class="font-semibold text-purple-600 mb-2">
                            <i class="fas fa-graduation-cap mr-2"></i>研修資料
                        </h4>
                        <ul class="text-sm space-y-1">
                            <li>• コーディング規約</li>
                            <li>• 実装ガイド</li>
                            <li>• トラブルシューティング</li>
                            <li>• FAQ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 8. 新人研修対応設計 -->
        <section id="training" class="bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-gray-800"><i class="fas fa-graduation-cap mr-3"></i>8. 新人研修対応設計</h2>
            
            <div class="bg-blue-50 p-6 rounded-lg mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-800"><i class="fas fa-lightbulb mr-2"></i>研修プログラム構成</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-3">段階的学習アプローチ</h4>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <div class="flow-step text-sm">1</div>
                                <div class="ml-3">
                                    <strong>基礎理解</strong><br>
                                    <span class="text-sm text-gray-600">ドメイン知識・アーキテクチャ理解</span>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <div class="flow-step text-sm">2</div>
                                <div class="ml-3">
                                    <strong>簡単な機能追加</strong><br>
                                    <span class="text-sm text-gray-600">新しい申請種別の追加</span>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <div class="flow-step text-sm">3</div>
                                <div class="ml-3">
                                    <strong>複雑な機能実装</strong><br>
                                    <span class="text-sm text-gray-600">承認フロー・通知機能の拡張</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-3">サポート体制</h4>
                        <ul class="space-y-2 text-sm">
                            <li><i class="fas fa-check text-green-500 mr-2"></i>豊富なコメント・サンプルコード</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>自動テストによる品質保証</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>段階的なコードレビュー</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>実装ガイドラインの完備</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">新人向け実装ガイド</h3>
                <div class="code-block p-4 font-mono text-sm">
                    <pre>/**
 * 新しい申請種別追加ガイド
 * 
 * ========================================
 * 新人エンジニア向け実装手順書
 * ========================================
 * 
 * このファイルは新しい申請種別を追加する際の
 * 手順とベストプラクティスを説明します。
 * 
 * 【実装手順】
 * 1. 申請種別マスタにデータ追加
 * 2. フォーム設定（JSON）の定義
 * 3. バリデーションルールの実装
 * 4. 承認フローの設定
 * 5. テストケースの作成
 * 
 * 【サンプル：副業申請の追加】
 */

// Step 1: 申請種別マスタデータ
INSERT INTO m_application_types (
    type_code, 
    type_name, 
    description,
    form_config,
    is_file_attachable,
    max_attach_files
) VALUES (
    'SIDE_JOB',
    '副業申請',
    '副業を行う際の申請書',
    '{
        "fields": [
            {
                "name": "companyName",
                "label": "副業先企業名",
                "type": "text",
                "required": true,
                "maxLength": 100
            },
            {
                "name": "workContent",
                "label": "業務内容",
                "type": "textarea",
                "required": true,
                "maxLength": 500
            },
            {
                "name": "workDays",
                "label": "勤務予定日数（月）",
                "type": "number",
                "required": true,
                "min": 1,
                "max": 10
            },
            {
                "name": "expectedIncome",
                "label": "想定収入（月額）",
                "type": "number",
                "required": true
            }
        ]
    }',
    true,
    3
);

// Step 2: バリデーション実装
/**
 * 副業申請バリデーター
 * 新人向け：バリデーションの実装方法を学習
 */
@Component
public class SideJobApplicationValidator implements ApplicationValidator {
    
    @Override
    public boolean supports(String applicationType) {
        return "SIDE_JOB".equals(applicationType);
    }
    
    @Override
    public ValidationResult validate(Map&lt;String, Object&gt; formData) {
        ValidationResult result = new ValidationResult();
        
        // 企業名チェック
        String companyName = (String) formData.get("companyName");
        if (StringUtils.isBlank(companyName)) {
            result.addError("companyName", "企業名は必須です");
        }
        
        // 勤務日数チェック
        Integer workDays = (Integer) formData.get("workDays");
        if (workDays == null || workDays &lt; 1 || workDays &gt; 10) {
            result.addError("workDays", "勤務日数は1-10日の範囲で入力してください");
        }
        
        // 収入チェック
        Integer expectedIncome = (Integer) formData.get("expectedIncome");
        if (expectedIncome == null || expectedIncome &lt; 0) {
            result.addError("expectedIncome", "想定収入は0以上で入力してください");
        }
        
        return result;
    }
}

// Step 3: テストケース作成
/**
 * 副業申請テスト
 * 新人向け：テストの書き方を学習
 */
@Test
@DisplayName("副業申請バリデーションテスト")
void validateSideJobApplication() {
    // Given
    Map&lt;String, Object&gt; validFormData = Map.of(
        "companyName", "テスト株式会社",
        "workContent", "Webシステム開発",
        "workDays", 5,
        "expectedIncome", 100000
    );
    
    // When
    ValidationResult result = validator.validate(validFormData);
    
    // Then
    assertThat(result.isValid()).isTrue();
}

/**
 * 【新人エンジニアへのアドバイス】
 * 
 * 1. 小さく始める
 *    - 既存のコードパターンを真似して実装
 *    - 段階的に機能を追加
 * 
 * 2. テストファースト
 *    - 実装前にテストケースを作成
 *    - テストが通ることを確認してから本実装
 * 
 * 3. コードレビュー活用
 *    - 早めにプルリクエストを作成
 *    - フィードバックを積極的に求める
 * 
 * 4. ドキュメント更新
 *    - 実装と同時にドキュメントを更新
 *    - 次の人が理解しやすいよう心がける
 */</pre>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">チェックリスト</h3>
                    <div class="bg-gray-50 p-4 rounded">
                        <h4 class="font-semibold mb-3">新機能実装時の確認事項</h4>
                        <div class="space-y-2 text-sm">
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span>マスタデータの追加</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span>バリデーションロジックの実装</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span>承認フローの設定</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span>単体テストの作成</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span>統合テストの作成</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span>JavaDocコメントの記述</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span>エラーハンドリングの実装</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span>ログ出力の追加</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">学習リソース</h3>
                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded p-4">
                            <h4 class="font-semibold text-green-600">内部資料</h4>
                            <ul class="text-sm mt-2 space-y-1">
                                <li>• システム設計書</li>
                                <li>• API仕様書</li>
                                <li>• データベース設計書</li>
                                <li>• コーディング規約</li>
                            </ul>
                        </div>
                        <div class="border border-gray-200 rounded p-4">
                            <h4 class="font-semibold text-blue-600">外部リソース</h4>
                            <ul class="text-sm mt-2 space-y-1">
                                <li>• Spring Boot公式ドキュメント</li>
                                <li>• Clean Architecture解説</li>
                                <li>• JUnit 5ガイド</li>
                                <li>• PostgreSQL チュートリアル</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 9. プロジェクト構成 -->
        <section id="project-structure" class="bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-gray-800"><i class="fas fa-folder-tree mr-3"></i>9. プロジェクト構成</h2>
            
            <div class="grid lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">ディレクトリ構造</h3>
                    <div class="code-block p-4 font-mono text-sm">
                        <pre>giiku/
├── src/
│   ├── main/
│   │   ├── java/jp/co/apsa/giiku/
│   │   │   ├── GiikuApplication.java
│   │   │   ├── config/          # 設定クラス
│   │   │   │   ├── SecurityConfig.java
│   │   │   │   ├── DatabaseConfig.java
│   │   │   │   └── WebConfig.java
│   │   │   ├── domain/          # ドメイン層
│   │   │   │   ├── application/ # 申請ドメイン
│   │   │   │   │   ├── Application.java
│   │   │   │   │   ├── ApplicationAttachment.java
│   │   │   │   │   ├── ApplicationType.java
│   │   │   │   │   └── TravelRequestDetails.java
│   │   │   │   ├── approval/    # 承認ドメイン
│   │   │   │   │   ├── ApplicationApproval.java
│   │   │   │   │   ├── ApplicationApprovalRoute.java
│   │   │   │   │   ├── ApplicationApprovalRouteId.java
│   │   │   │   │   ├── ApprovalFlow.java
│   │   │   │   │   ├── ApprovalRoute.java
│   │   │   │   │   ├── ApprovalStep.java
│   │   │   │   │   └── ApprovalHistory.java
│   │   │   │   ├── user/        # ユーザードメイン
│   │   │   │   │   ├── User.java
│   │   │   │   │   ├── Department.java
│   │   │   │   │   └── Position.java
│   │   │   │   ├── log/         # ログドメイン
│   │   │   │   │   ├── AuditLog.java
│   │   │   │   │   └── SystemLog.java
│   │   │   │   └── common/      # 共通ドメイン
│   │   │   │       ├── AuditableEntity.java
│   │   │   │       └── DomainEvent.java
│   │   │   ├── application/     # アプリケーション層
│   │   │   │   ├── command/     # コマンド処理
│   │   │   │   │   ├── ApplicationSubmitCommand.java
│   │   │   │   │   └── ApplicationSubmitHandler.java
│   │   │   │   ├── query/       # クエリ処理
│   │   │   │   │   ├── ApplicationListQuery.java
│   │   │   │   │   └── ApplicationListQueryHandler.java
│   │   │   │   ├── event/       # イベント処理
│   │   │   │   │   ├── ApplicationSubmittedEvent.java
│   │   │   │   │   └── ApplicationSubmittedEventHandler.java
│   │   │   │   └── service/     # アプリケーションサービス
│   │   │   │       ├── ApplicationService.java
│   │   │   │       ├── ApplicationTypeService.java
│   │   │   │       ├── ApprovalRouteService.java
│   │   │   │       ├── DashboardService.java
│   │   │   │       ├── DepartmentService.java
│   │   │   │       ├── PositionService.java
│   │   │   │       ├── UserService.java
│   │   │   │       ├── UserAdminService.java
│   │   │   │       └── TravelRequestService.java
│   │   │   ├── infrastructure/  # インフラ層
│   │   │   │   ├── repository/  # リポジトリ
│   │   │   │   │   ├── ApplicationRepository.java
│   │   │   │   │   ├── ApplicationTypeRepository.java
│   │   │   │   │   ├── ApplicationApprovalRepository.java
│   │   │   │   │   ├── ApplicationApprovalRouteRepository.java
│   │   │   │   │   ├── ApprovalFlowRepository.java
│   │   │   │   │   ├── ApprovalRouteRepository.java
│   │   │   │   │   ├── AuditLogRepository.java
│   │   │   │   │   ├── DepartmentRepository.java
│   │   │   │   │   ├── PositionRepository.java
│   │   │   │   │   ├── TravelRequestRepository.java
│   │   │   │   │   └── UserRepository.java
│   │   │   │   ├── web/         # Web層
│   │   │   │   │   ├── controller/
│   │   │   │   │   │   ├── ApplicationController.java
│   │   │   │   │   │   ├── DashboardController.java
│   │   │   │   │   │   ├── GlobalModelAttributeAdvice.java
│   │   │   │   │   │   ├── LoginController.java
│   │   │   │   │   │   ├── TravelRequestController.java
│   │   │   │   │   │   └── admin/
│   │   │   │   │   │       ├── AdminController.java
│   │   │   │   │   │       ├── ApplicationTypeController.java
│   │   │   │   │   │       ├── ApprovalRouteController.java
│   │   │   │   │   │       ├── DepartmentController.java
│   │   │   │   │   │       ├── PositionController.java
│   │   │   │   │   │       ├── RequestViewController.java
│   │   │   │   │   │       └── UserController.java
│   │   │   │   │   ├── dto/
│   │   │   │   │   │   ├── ApplicationDto.java
│   │   │   │   │   │   ├── ChartDto.java
│   │   │   │   │   │   └── TravelRequestDto.java
│   │   │   │   ├── notification/
│   │   │   │   │   └── SlackNotificationService.java
│   │   │   │   └── audit/
│   │   │   │       └── AuditLogService.java
│   │   │   └── shared/          # 共有
│   │   │       ├── exception/
│   │   │       │   ├── BusinessException.java
│   │   │       │   └── ValidationException.java
│   │   │       └── util/
│   │   │           ├── DateUtil.java
│   │   │           └── JsonUtil.java
│   │   │   ├── resources/
│   │   │   ├── application.yml
│   │   │   ├── application-dev.yml
│   │   │   ├── application-prod.yml
│   │   │   ├── logback-spring.xml
│   │   │   ├── db/migration/
│   │   │   │   ├── V001__create_schema.sql
│   │   │   │   ├── V002__insert_sample_data.sql
│   │   │   │   ├── V003__extend_application_approvals.sql
│   │   │   │   ├── V004__sync_schema_with_entities.sql
│   │   │   │   ├── V005__create_approval_flows.sql
│   │   │   │   ├── V006__fix_approval_routes_columns.sql
│   │   │   │   ├── V007__extend_logs_tables.sql
│   │   │   │   ├── V008__sync_add_department_code_and_cleanup.sql
│   │   │   │   ├── V009__add_audit_event_type.sql
│   │   │   │   ├── V010__defer_foreign_keys.sql
│   │   │   │   ├── V011__reorder_application_attachments_columns.sql
│   │   │   │   ├── V012__add_supervisor_and_department_responsibles.sql
│   │   │   │   ├── V013__add_approval_route_options.sql
│   │   │   │   ├── V014__create_travel_requests_table.sql
│   │   │   │   ├── V015__add_current_step_to_travel_requests.sql
│   │   │   │   └── V016__create_application_restructure_tables.sql
│   │   │   ├── static/
│   │   │   │   ├── css/
│   │   │   │   ├── js/
│   │   │   │   └── images/
│   │   │   └── templates/
│   │   │       ├── application/
│   │   │       ├── user/
│   │   │       └── layout/
│   │   └── webapp/
│   │       └── WEB-INF/
│   └── test/
│       ├── java/jp/co/apsa/giiku/
│       │   ├── domain/
│       │   ├── application/
│       │   ├── infrastructure/
│       │   └── integration/
│       └── resources/
├── frontend/                # React フロントエンド
│   ├── public/
│   ├── src/
│   │   ├── components/
│   │   ├── pages/
│   │   ├── hooks/
│   │   ├── services/
│   │   └── utils/
│   ├── package.json
│   └── webpack.config.js
├── docs/                   # ドキュメント
│   ├── api/               # API仕様書
│   ├── architecture/      # アーキテクチャ文書
│   ├── database/         # DB設計書
│   └── training/         # 研修資料
├── scripts/              # スクリプト
│   ├── setup.sh
│   ├── deploy.sh
│   └── backup.sh
├── docker/              # Docker設定
│   ├── Dockerfile
│   ├── docker-compose.yml
│   └── postgres/
├── build.gradle
├── settings.gradle
├── gradle.properties
└── README.md</pre>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-600">build.gradle完全版</h3>
                    <div class="code-block p-4 font-mono text-sm">
                        <pre>/*
 * 技育システム ビルド設定
 * Copyright (c) 2024 APSA Co.,Ltd. All rights reserved.
 */

plugins {
    id 'java'
    id 'org.springframework.boot' version '3.1.3'
    id 'io.spring.dependency-management' version '1.1.3'
    id 'org.flywaydb.flyway' version '9.21.1'
    id 'jacoco'
    id 'org.sonarqube' version '4.3.1'
    id 'com.github.spotbugs' version '5.1.3'
    id 'checkstyle'
}

group = 'jp.co.apsa'
version = '1.0.0'
sourceCompatibility = '17'

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
}

dependencies {
    // Spring Boot Starters
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-security'
    implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'
    implementation 'org.springframework.boot:spring-boot-starter-validation'
    implementation 'org.springframework.boot:spring-boot-starter-mail'
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    implementation 'org.springframework.boot:spring-boot-starter-cache'
    
    // Database
    implementation 'org.postgresql:postgresql'
    implementation 'org.flywaydb:flyway-core'
    
    // Logging
    implementation 'net.logstash.logback:logstash-logback-encoder:7.4'
    implementation 'ch.qos.logback:logback-classic'
    
    // Utility
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    implementation 'org.mapstruct:mapstruct:1.5.5.Final'
    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'
    
    // JSON Processing
    implementation 'com.fasterxml.jackson.core:jackson-databind'
    implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'
    
    // HTTP Client
    implementation 'org.springframework.boot:spring-boot-starter-webflux'
    
    // Documentation
    implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.2.0'
    
    // Testing
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'org.springframework.security:spring-security-test'
    testImplementation 'org.testcontainers:junit-jupiter'
    testImplementation 'org.testcontainers:postgresql'
    testImplementation 'org.mockito:mockito-inline'
    testImplementation 'com.github.tomakehurst:wiremock-jre8:2.35.0'
    
    // Development Tools
    developmentOnly 'org.springframework.boot:spring-boot-devtools'
}

// Java設定
java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

// テスト設定
test {
    useJUnitPlatform()
    finalizedBy jacocoTestReport
    testLogging {
        events "passed", "skipped", "failed"
    }
}

// JaCoCo設定
jacocoTestReport {
    dependsOn test
    reports {
        xml.required = true
        html.required = true
    }
}

jacocoTestCoverageVerification {
    violationRules {
        rule {
            limit {
                counter = 'LINE'
                value = 'COVEREDRATIO'
                minimum = 0.80
            }
        }
        rule {
            limit {
                counter = 'BRANCH'
                value = 'COVEREDRATIO'
                minimum = 0.70
            }
        }
    }
}

// Checkstyle設定
checkstyle {
    toolVersion = '10.12.1'
    configFile = file("${rootDir}/config/checkstyle/checkstyle.xml")
}

// SpotBugs設定
spotbugs {
    toolVersion = '4.7.3'
    excludeFilter = file("${rootDir}/config/spotbugs/exclude.xml")
}

// SonarQube設定
sonar {
    properties {
        property "sonar.projectKey", "giiku-system"
        property "sonar.projectName", "技育システム"
        property "sonar.host.url", "http://localhost:9000"
        property "sonar.coverage.jacoco.xmlReportPaths", 
                 "${buildDir}/reports/jacoco/test/jacocoTestReport.xml"
    }
}

// Flyway設定
flyway {
    url = 'jdbc:postgresql://localhost:5432/giiku'
    user = 'giiku_user'
    password = 'giiku_pass'
    schemas = ['public']
    locations = ['classpath:db/migration']
}

// 品質チェックタスク
task qualityCheck {
    dependsOn check, jacocoTestCoverageVerification, spotbugsMain
    description = '品質チェックを実行'
}

// アプリケーション情報
springBoot {
    buildInfo()
}

// JAR設定
jar {
    enabled = false
    archiveClassifier = ''
}

// ドキュメント生成
javadoc {
    if(JavaVersion.current().isJava9Compatible()) {
        options.addBooleanOption('html5', true)
    }
    options.encoding = 'UTF-8'
    options.charSet = 'UTF-8'
}</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- 10. 実装サンプル -->
        <section id="implementation" class="bg-white rounded-lg card-shadow p-8 mb-8">
            <h2 class="text-3xl font-bold mb-6 text-gray-800"><i class="fas fa-code mr-3"></i>10. 実装サンプル</h2>
            
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">メインアプリケーションクラス</h3>
                <div class="code-block p-4 font-mono text-sm">
                    <pre>/*
 * 技育システム メインアプリケーション
 * Copyright (c) 2024 APSA Co.,Ltd. All rights reserved.
 */
package jp.co.apsa.giiku;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.scheduling.annotation.EnableAsync;
import org.springframework.scheduling.annotation.EnableScheduling;
import org.springframework.transaction.annotation.EnableTransactionManagement;

/**
 * 技育システム メインアプリケーションクラス
 * &lt;p&gt;
 * 社内申請書類管理システム「技育」のエントリーポイントです。
 * Spring Boot 3.1.3をベースとし、Hexagonal Architecture + CQRSパターンを採用しています。
 * &lt;/p&gt;
 * 
 * &lt;h3&gt;主な機能&lt;/h3&gt;
 * &lt;ul&gt;
 *   &lt;li&gt;多種多様な申請書類の統一管理&lt;/li&gt;
 *   &lt;li&gt;柔軟な承認フロー（最大5段階）&lt;/li&gt;
 *   &lt;li&gt;完全な監査ログ記録&lt;/li&gt;
 *   &lt;li&gt;Slack通知連携&lt;/li&gt;
 *   &lt;li&gt;Google OAuth2ログイン対応&lt;/li&gt;
 * &lt;/ul&gt;
 * 
 * @author APSA Co.,Ltd.
 * @version 1.0.0
 * @since 2024-01-01
 */
@SpringBootApplication
@EnableTransactionManagement
@EnableCaching
@EnableAsync
@EnableScheduling
public class GiikuApplication {

    /**
     * アプリケーション開始点
     * 
     * @param args コマンドライン引数
     */
    public static void main(String[] args) {
        SpringApplication.run(GiikuApplication.class, args);
    }
}</pre>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">セキュリティ設定</h3>
                <div class="code-block p-4 font-mono text-sm">
                    <pre>/*
 * セキュリティ設定
 * Copyright (c) 2024 APSA Co.,Ltd. All rights reserved.
 */
package jp.co.apsa.giiku.config;

import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.web.SecurityFilterChain;

/**
 * Spring Security設定クラス
 * &lt;p&gt;
 * 認証・認可の設定を行います。
 * ID/PWログインとGoogle OAuth2ログインの両方に対応しています。
 * &lt;/p&gt;
 * 
 * &lt;h3&gt;セキュリティ方針&lt;/h3&gt;
 * &lt;ul&gt;
 *   &lt;li&gt;全てのページで認証が必要&lt;/li&gt;
 *   &lt;li&gt;CSRF対策を有効化&lt;/li&gt;
 *   &lt;li&gt;セッション固定攻撃対策&lt;/li&gt;
 *   &lt;li&gt;セキュアなパスワード暗号化&lt;/li&gt;
 * &lt;/ul&gt;
 * 
 * @author APSA Co.,Ltd.
 * @since 1.0.0
 */
@Configuration
@EnableWebSecurity
@EnableMethodSecurity
@RequiredArgsConstructor
public class SecurityConfig {

    private final CustomUserDetailsService userDetailsService;
    private final OAuth2LoginSuccessHandler oauth2LoginSuccessHandler;

    /**
     * セキュリティフィルターチェーンの設定
     * 
     * @param http HttpSecurity
     * @return SecurityFilterChain
     * @throws Exception 設定エラー
     */
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            // 認可設定
            .authorizeHttpRequests(authz -&gt; authz
                .requestMatchers("/css/**", "/js/**", "/images/**", "/favicon.ico").permitAll()
                .requestMatchers("/actuator/health").permitAll()
                .requestMatchers("/login", "/error").permitAll()
                .anyRequest().authenticated()
            )
            // フォームログイン設定
            .formLogin(form -&gt; form
                .loginPage("/login")
                .loginProcessingUrl("/login")
                .defaultSuccessUrl("/dashboard", true)
                .failureUrl("/login?error=true")
                .usernameParameter("loginId")
                .passwordParameter("password")
                .permitAll()
            )
            // OAuth2ログイン設定
            .oauth2Login(oauth2 -&gt; oauth2
                .loginPage("/login")
                .defaultSuccessUrl("/dashboard", true)
                .failureUrl("/login?error=oauth2")
                .successHandler(oauth2LoginSuccessHandler)
                .userInfoEndpoint(userInfo -&gt; userInfo
                    .userService(customOAuth2UserService())
                )
            )
            // ログアウト設定
            .logout(logout -&gt; logout
                .logoutUrl("/logout")
                .logoutSuccessUrl("/login?logout=true")
                .invalidateHttpSession(true)
                .deleteCookies("JSESSIONID")
                .permitAll()
            )
            // セッション管理
            .sessionManagement(session -&gt; session
                .maximumSessions(1)
                .maxSessionsPreventsLogin(false)
                .sessionRegistry(sessionRegistry())
            )
            // CSRF設定
            .csrf(csrf -&gt; csrf
                .ignoringRequestMatchers("/api/**") // API endpoint
            )
            // セキュリティヘッダー
            .headers(headers -&gt; headers
                .frameOptions().sameOrigin()
                .contentTypeOptions().and()
                .xssProtection().and()
                .httpStrictTransportSecurity(hstsConfig -&gt; hstsConfig
                    .maxAgeInSeconds(31536000)
                    .includeSubdomains(true)
                )
            );

        return http.build();
    }

    /**
     * パスワードエンコーダー
     * BCryptを使用してセキュアなパスワード暗号化を実現
     * 
     * @return PasswordEncoder
     */
    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder(12);
    }

    /**
     * セッションレジストリ
     * セッション管理のために使用
     * 
     * @return SessionRegistry
     */
    @Bean
    public SessionRegistry sessionRegistry() {
        return new SessionRegistryImpl();
    }

    /**
     * カスタムOAuth2ユーザーサービス
     * Google OAuth2でのユーザー情報取得・連携処理
     * 
     * @return CustomOAuth2UserService
     */
    @Bean
    public CustomOAuth2UserService customOAuth2UserService() {
        return new CustomOAuth2UserService(userDetailsService);
    }
}</pre>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-600">application.yml設定</h3>
                <div class="code-block p-4 font-mono text-sm">
                    <pre># 技育システム アプリケーション設定
# Copyright (c) 2024 APSA Co.,Ltd. All rights reserved.

spring:
  application:
    name: giiku
  
  # プロファイル設定
  profiles:
    active: dev
  
  # データベース設定
  datasource:
    url: jdbc:postgresql://localhost:5432/giiku
    username: ${DB_USERNAME:giiku_user}
    password: ${DB_PASSWORD:giiku_pass}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
  
  # JPA設定
  jpa:
    hibernate:
      ddl-auto: validate
      naming:
        physical-strategy: org.hibernate.boot.model.naming.SnakeCasePhysicalNamingStrategy
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        use_sql_comments: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true
  
  # Flyway設定
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: true
  
  # セキュリティ設定
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID:your-google-client-id}
            client-secret: ${GOOGLE_CLIENT_SECRET:your-google-client-secret}
            scope: profile, email
            redirect-uri: "{baseUrl}/login/oauth2/code/{registrationId}"
        provider:
          google:
            authorization-uri: https://accounts.google.com/o/oauth2/auth
            token-uri: https://oauth2.googleapis.com/token
            user-info-uri: https://www.googleapis.com/oauth2/v3/userinfo
            user-name-attribute: sub
  
  # キャッシュ設定
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=1000,expireAfterWrite=10m
  
  # メール設定
  mail:
    host: ${MAIL_HOST:localhost}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:}
    password: ${MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
  
  # 非同期処理設定
  task:
    execution:
      pool:
        core-size: 4
        max-size: 16
        queue-capacity: 100
        keep-alive: 60s
      thread-name-prefix: giiku-async-
  
  # Thymeleaf設定
  thymeleaf:
    cache: false
    encoding: UTF-8
    mode: HTML
    prefix: classpath:/templates/
    suffix: .html

# サーバー設定
server:
  port: 8080
  servlet:
    context-path: /giiku
    session:
      timeout: 30m
      cookie:
        http-only: true
        secure: false # 開発環境
        same-site: lax
  tomcat:
    max-connections: 8192
    accept-count: 100
    threads:
      max: 200
      min-spare: 10

# ログ設定
logging:
  level:
    jp.co.apsa.giiku: INFO
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: logs/giiku.log
  logback:
    rollingpolicy:
      max-file-size: 100MB
      max-history: 30

# 管理機能設定
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when-authorized
  info:
    env:
      enabled: true
    build:
      enabled: true

# アプリケーション固有設定
giiku:
  # ファイルアップロード設定
  file:
    upload:
      path: ${FILE_UPLOAD_PATH:/tmp/giiku/uploads}
      max-size: 10MB
      allowed-types: pdf,doc,docx,xls,xlsx,jpg,jpeg,png,gif
  
  # 通知設定
  notification:
    slack:
      webhook-url: ${SLACK_WEBHOOK_URL:}
      channel: ${SLACK_CHANNEL:#giiku-notifications}
      username: 技育システム
    email:
      from: ${EMAIL_FROM:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5c32332e392c30251c3d2c2f3d723f3372362c">[email&#160;protected]</a>}
      enabled: ${EMAIL_ENABLED:true}
  
  # 承認設定
  approval:
    timeout-hours: 72
    reminder-hours: 24
    auto-escalation-enabled: false
  
  # セキュリティ設定
  security:
    password:
      min-length: 8
      require-uppercase: true
      require-lowercase: true
      require-numbers: true
      require-special-chars: false
    session:
      max-inactive-interval: 1800 # 30分
    remember-me:
      enabled: true
      validity-seconds: 1209600 # 14日

# OpenAPI設定
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    operationsSorter: method
  info:
    title: 技育システム API
    description: 社内申請書類管理システムのREST API
    version: 1.0.0
    contact:
      name: APSA Co.,Ltd.
      email: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7410110234150407155a171b5a1e04">[email&#160;protected]</a></pre>
                </div>
            </div>
        </section>

        <!-- フッター -->
        <footer class="bg-gray-800 text-white py-8 mt-12">
            <div class="max-w-7xl mx-auto px-6">
                <div class="grid md:grid-cols-3 gap-8">
                    <div>
                        <h3 class="text-xl font-bold mb-4">技育システム</h3>
                        <p class="text-gray-300">社内申請書類管理システム</p>
                        <p class="text-sm text-gray-400 mt-2">Hexagonal Architecture + CQRS</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-3">技術スタック</h4>
                        <ul class="space-y-1 text-sm text-gray-300">
                            <li>Java 17 + Spring Boot 3.1.3</li>
                            <li>PostgreSQL 15 + Spring Data JPA</li>
                            <li>React 19.1 + Bootstrap 5.3</li>
                            <li>SLF4J + Logback + DB記録</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-3">開発・運用</h4>
                        <ul class="space-y-1 text-sm text-gray-300">
                            <li>Gradle (Groovy) + Lombok</li>
                            <li>JUnit 5 + TestContainers</li>
                            <li>JavaDoc自動生成</li>
                            <li>新人研修対応設計</li>
                        </ul>
                    </div>
                </div>
                <hr class="border-gray-600 my-6">
                <div class="flex justify-between items-center">
                    <p class="text-gray-400">© 2024 APSA Co.,Ltd. All rights reserved.</p>
                    <div class="flex space-x-4">
                        <span class="text-sm text-gray-400">Version 2.0</span>
                        <span class="text-sm text-gray-400">Last Updated: 2024-01-15</span>
                    </div>
                </div>
            </div>
        </footer>
    </div>



    
    
    
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body></html>