<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day40: JavaScript基礎・DOM操作・イベント処理</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .code-block {
            background-color: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0.375rem;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        .highlight {
            background-color: #fff3cd;
            padding: 0.5rem;
            border-radius: 0.25rem;
            border-left: 4px solid #ffc107;
        }
        .demo-area {
            border: 2px dashed #dee2e6;
            padding: 2rem;
            margin: 1rem 0;
            border-radius: 0.5rem;
            background-color: #f8f9fa;
        }
        .exercise-area {
            background-color: #e7f3ff;
            border-left: 4px solid #0066cc;
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 0.375rem;
        }
        .fixed-nav {
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.95);
        }
        .nav-link:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }
        .breadcrumb-separator::after {
            content: ">";
            margin: 0 8px;
            color: #9CA3AF;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <nav class="fixed top-0 left-0 right-0 z-50 fixed-nav border-b border-gray-200">
        <div class="bg-blue-600 text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-12">
                    <div class="flex items-center">
                        <i class="fas fa-graduation-cap mr-2"></i>
                        <span class="font-semibold">ITエンジニア育成カリキュラム</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="./day39_lecture.html" class="nav-link px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                            <i class="fas fa-chevron-left mr-1"></i> 前の講義
                        </a>
                        <a href="./day41_lecture.html" class="nav-link px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                            次の講義 <i class="fas fa-chevron-right ml-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-white px-4 py-3">
            <div class="max-w-7xl mx-auto">
                <div class="flex items-center justify-between">
                    <div class="flex items-center text-sm text-gray-600">
                        <a href="../index.html" class="hover:text-blue-600"><i class="fas fa-home mr-1"></i>ホーム</a>
                        <span class="breadcrumb-separator"></span>
                        <a href="../month/month3.html" class="hover:text-blue-600">3ヶ月目: Webアプリケーション開発実践</a>
                        <span class="breadcrumb-separator"></span>
                        <a href="../week/week9.html" class="hover:text-blue-600">9週目: フロントエンド基礎</a>
                        <span class="breadcrumb-separator"></span>
                        <span class="font-semibold text-blue-600">40日目: JavaScript基礎・DOM操作・イベント処理</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <a href="../day/day40.html" class="inline-flex items-center px-3 py-1 border border-blue-300 rounded-md text-sm text-blue-600 hover:bg-blue-50 transition-colors">
                            <i class="fas fa-clipboard-list mr-1"></i> 本日の概要
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <main class="pt-32">
    <div class="max-w-6xl mx-auto py-8 px-4">
        <!-- ヘッダー -->
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-blue-600 mb-4">
                <i class="fas fa-code mr-3"></i>Day40: JavaScript基礎・DOM操作・イベント処理
            </h1>
            <p class="text-xl text-gray-600">Web開発に必要なJavaScript実践スキル完全習得</p>
            <div class="flex justify-center items-center mt-4 space-x-4">
                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">JavaScript基礎</span>
                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">DOM操作</span>
                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">イベント処理</span>
            </div>
        </header>

        <!-- 学習目標 -->
        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                <i class="fas fa-target text-blue-500 mr-2"></i>本日の学習目標
            </h2>
            <div class="grid md:grid-cols-2 gap-4">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-blue-800 mb-2">JavaScript基礎構文をマスター</h3>
                    <p class="text-sm text-gray-600">変数・関数・制御構文を実用レベルで理解し、効率的なコードを記述できる</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-green-800 mb-2">DOM操作を実践で習得</h3>
                    <p class="text-sm text-gray-600">要素取得・動的コンテンツ生成・スタイル変更を実際にコーディングできる</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-purple-800 mb-2">イベント処理を完全理解</h3>
                    <p class="text-sm text-gray-600">ユーザーインタラクションに応答する動的Webページを作成できる</p>
                </div>
                <div class="bg-yellow-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-yellow-800 mb-2">実用的なWebアプリを構築</h3>
                    <p class="text-sm text-gray-600">学習した技術を組み合わせて動的なWebアプリケーションを開発できる</p>
                </div>
            </div>
        </section>

        <!-- JavaScript基礎 -->
        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">
                <i class="fas fa-play-circle text-blue-500 mr-2"></i>1. JavaScript基礎構文の完全理解
            </h2>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">JavaScriptとは？</h3>
                <div class="highlight mb-4">
                    <p><strong>JavaScript（ジャバスクリプト）</strong>は、Webページに動きや機能を追加するプログラミング言語です。HTMLが「骨組み」、CSSが「見た目」だとすると、JavaScriptは「動作・機能」を担当します。</p>
                </div>
                
                <h4 class="text-lg font-semibold text-gray-600 mb-2">主な役割</h4>
                <ul class="list-disc list-inside text-gray-600 space-y-1 mb-4">
                    <li>ボタンクリック、フォーム送信などのユーザー操作への対応</li>
                    <li>ページ内容の動的変更（テキスト変更、要素の追加・削除）</li>
                    <li>アニメーション効果やインタラクティブな機能</li>
                    <li>サーバーとの通信（Ajax）</li>
                </ul>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">変数宣言の使い分け</h3>
                <div class="code-block">// const（定数）: 再代入不可、ブロックスコープ
const userName = "田中太郎";
const PI = 3.14159;

// let（変数）: 再代入可能、ブロックスコープ
let userAge = 25;
let counter = 0;

// var（旧式）: 再代入可能、関数スコープ（非推奨）
var oldStyle = "使用を避ける";

// 実用例：ECサイトの商品計算
const TAX_RATE = 0.1; // 消費税率（定数）
let totalPrice = 0;   // 合計金額（変数）</div>

                <div class="bg-yellow-50 p-4 rounded-lg mb-4">
                    <h4 class="font-semibold text-yellow-800 mb-2">使い分けのポイント</h4>
                    <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                        <li><strong>const</strong>: 値が変わらない場合（設定値、固定データなど）</li>
                        <li><strong>let</strong>: 値が変わる可能性がある場合（カウンタ、ユーザー入力など）</li>
                        <li><strong>var</strong>: 現代では使用を避ける（スコープの問題があるため）</li>
                    </ul>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">データ型と型変換</h3>
                <div class="code-block">// 基本データ型
let number = 42;              // Number（数値）
let text = "Hello World";     // String（文字列）
let isActive = true;          // Boolean（真偽値）
let emptyValue = null;        // null（明示的な空値）
let undefinedValue;           // undefined（未定義）

// 複合データ型
let person = {                // Object（オブジェクト）
    name: "山田花子",
    age: 30
};
let numbers = [1, 2, 3, 4, 5]; // Array（配列）

// 型判定
console.log(typeof number);    // "number"
console.log(typeof text);      // "string"
console.log(Array.isArray(numbers)); // true

// 型変換の実例
let userInput = "25";          // 文字列の数値
let age = Number(userInput);   // 数値に変換
let ageText = String(age);     // 文字列に変換
let isAdult = Boolean(age >= 18); // 真偽値に変換</div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">関数の定義パターン</h3>
                <div class="code-block">// 1. 関数宣言（Function Declaration）
function calculateTax(price) {
    return price * 0.1;
}

// 2. 関数式（Function Expression）
const calculateDiscount = function(price, rate) {
    return price * (1 - rate);
};

// 3. アロー関数（Arrow Function）
const formatPrice = (price) => {
    return price.toLocaleString() + "円";
};

// アロー関数（短縮形）
const double = x => x * 2;
const greet = () => "こんにちは！";

// 実用例：商品価格計算システム
const calculateFinalPrice = (basePrice, discountRate = 0) => {
    const discountedPrice = basePrice * (1 - discountRate);
    const taxIncluded = discountedPrice * 1.1;
    return Math.round(taxIncluded);
};

console.log(calculateFinalPrice(1000, 0.2)); // 880円</div>
            </div>

            <div class="demo-area">
                <h4 class="text-lg font-semibold mb-3">実習：JavaScript基礎</h4>
                <p class="mb-4">以下のボタンをクリックして、JavaScript基礎を体験してみましょう：</p>
                <div class="space-y-3">
                    <button onclick="demoVariables()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mr-2">
                        変数デモ
                    </button>
                    <button onclick="demoFunctions()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded mr-2">
                        関数デモ
                    </button>
                    <button onclick="demoCalculator()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded">
                        計算機デモ
                    </button>
                </div>
                <div id="jsBasicsResult" class="mt-4 p-3 bg-gray-100 rounded min-h-12"></div>
            </div>
        </section>

        <!-- DOM操作 -->
        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">
                <i class="fas fa-sitemap text-green-500 mr-2"></i>2. DOM操作の実践マスター
            </h2>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">DOM（Document Object Model）とは？</h3>
                <div class="highlight mb-4">
                    <p><strong>DOM</strong>は、HTMLドキュメントをJavaScriptから操作するためのインターフェースです。HTMLの各要素をオブジェクトとして扱い、内容の変更、スタイルの適用、要素の追加・削除などが可能になります。</p>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">要素取得の基本パターン</h3>
                <div class="code-block">// ID による取得（最も高速）
const titleElement = document.getElementById('main-title');

// クラス名による取得（複数要素）
const buttons = document.getElementsByClassName('btn');

// タグ名による取得
const paragraphs = document.getElementsByTagName('p');

// CSS セレクターによる取得（最も柔軟）
const firstButton = document.querySelector('.btn');           // 最初の1つ
const allButtons = document.querySelectorAll('.btn');         // すべて
const specificElement = document.querySelector('#content .highlight');

// 安全な要素取得（エラーチェック付き）
function safeGetElement(selector) {
    const element = document.querySelector(selector);
    if (!element) {
        console.warn(`要素が見つかりません: ${selector}`);
        return null;
    }
    return element;
}

// 実用例：フォーム要素の取得と検証
const emailInput = document.querySelector('input[type="email"]');
const submitButton = document.querySelector('button[type="submit"]');
const errorMessage = document.querySelector('.error-message');</div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">要素の内容とスタイル変更</h3>
                <div class="code-block">// テキスト内容の変更
const heading = document.getElementById('main-heading');
heading.textContent = '新しいタイトル';           // テキストのみ
heading.innerHTML = '<strong>太字のタイトル</strong>'; // HTML含む

// 属性の操作
const image = document.querySelector('img');
image.src = 'new-image.jpg';                    // src属性変更
image.alt = '新しい画像の説明';                 // alt属性変更
image.setAttribute('data-category', 'photos');  // カスタム属性追加

// CSS クラスの操作
const element = document.querySelector('.box');
element.classList.add('active');        // クラス追加
element.classList.remove('hidden');     // クラス削除
element.classList.toggle('expanded');   // クラスの切り替え
element.classList.contains('active');   // クラス存在確認

// インラインスタイルの変更
element.style.backgroundColor = '#ff6b6b';
element.style.color = 'white';
element.style.padding = '20px';
element.style.borderRadius = '10px';

// 実用例：ダークモード切り替え
function toggleDarkMode() {
    const body = document.body;
    body.classList.toggle('dark-mode');
    
    const isDark = body.classList.contains('dark-mode');
    localStorage.setItem('darkMode', isDark);
}</div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">動的要素の作成と削除</h3>
                <div class="code-block">// 新しい要素の作成
function createProductCard(product) {
    // カード要素を作成
    const card = document.createElement('div');
    card.className = 'product-card bg-white rounded-lg shadow-md p-4';
    
    // 内容を設定（XSS対策のため textContent を使用）
    card.innerHTML = `
        <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover rounded">
        <h3 class="text-lg font-semibold mt-2">${product.name}</h3>
        <p class="text-gray-600">${product.description}</p>
        <p class="text-xl font-bold text-blue-600">${product.price.toLocaleString()}円</p>
        <button class="btn-add-cart bg-blue-500 text-white px-4 py-2 rounded mt-2">
            カートに追加
        </button>
    `;
    
    // イベントリスナーを追加
    const addButton = card.querySelector('.btn-add-cart');
    addButton.addEventListener('click', () => addToCart(product));
    
    return card;
}

// 要素をDOMに追加
function displayProducts(products) {
    const container = document.getElementById('products-container');
    container.innerHTML = ''; // 既存の内容をクリア
    
    products.forEach(product => {
        const card = createProductCard(product);
        container.appendChild(card);
    });
}

// 要素の削除
function removeElement(elementId) {
    const element = document.getElementById(elementId);
    if (element) {
        element.remove(); // モダンな削除方法
        // または element.parentNode.removeChild(element); // 古い方法
    }
}</div>
            </div>

            <div class="demo-area">
                <h4 class="text-lg font-semibold mb-3">実習：DOM操作</h4>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">テキスト変更：</label>
                        <input type="text" id="textInput" placeholder="新しいテキストを入力" class="w-full p-2 border rounded">
                        <button onclick="changeText()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mt-2">
                            テキスト変更
                        </button>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">スタイル変更：</label>
                        <button onclick="changeStyle()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded mr-2">
                            色変更
                        </button>
                        <button onclick="toggleClass()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded">
                            クラス切り替え
                        </button>
                    </div>
                </div>
                <div id="demoTarget" class="p-4 bg-blue-100 rounded-lg text-center transition-all duration-300">
                    ここがDOM操作の対象要素です
                </div>
                <button onclick="createElement()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded mt-4">
                    新しい要素を追加
                </button>
                <div id="newElementsContainer" class="mt-4"></div>
            </div>
        </section>

        <!-- イベント処理 -->
        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">
                <i class="fas fa-mouse-pointer text-purple-500 mr-2"></i>3. イベント処理の完全理解
            </h2>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">イベントとは？</h3>
                <div class="highlight mb-4">
                    <p><strong>イベント</strong>は、ユーザーの操作（クリック、キー入力など）やブラウザの動作（ページ読み込み完了など）によって発生する「出来事」です。JavaScriptでイベントを監視し、適切な処理を実行することで、インタラクティブなWebページを作成できます。</p>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">基本的なイベント処理</h3>
                <div class="code-block">// 1. HTML属性での指定（簡単だが非推奨）
// &lt;button onclick="alert('クリックされました！')"&gt;ボタン&lt;/button&gt;

// 2. プロパティでの指定
const button = document.getElementById('myButton');
button.onclick = function() {
    alert('ボタンがクリックされました！');
};

// 3. addEventListener（推奨方法）
button.addEventListener('click', function(event) {
    console.log('クリックされました！', event);
});

// アロー関数での書き方
button.addEventListener('click', (event) => {
    console.log('アロー関数でのイベント処理', event.target);
});

// 複数のイベントリスナーを追加可能
button.addEventListener('click', handleClick);
button.addEventListener('click', logClick);
button.addEventListener('click', updateCounter);

function handleClick(event) {
    event.target.style.backgroundColor = '#28a745';
    event.target.textContent = 'クリック済み';
}

function logClick() {
    console.log('ボタンがクリックされました - ' + new Date().toLocaleTimeString());
}

let clickCount = 0;
function updateCounter() {
    clickCount++;
    document.getElementById('counter').textContent = `クリック回数: ${clickCount}`;
}</div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">主要なイベントタイプ</h3>
                <div class="code-block">// マウスイベント
element.addEventListener('click', handleClick);        // クリック
element.addEventListener('dblclick', handleDoubleClick); // ダブルクリック
element.addEventListener('mouseenter', handleMouseEnter); // マウス入場
element.addEventListener('mouseleave', handleMouseLeave); // マウス退場
element.addEventListener('mouseover', handleMouseOver);   // マウスオーバー

// キーボードイベント
document.addEventListener('keydown', handleKeyDown);   // キー押下
document.addEventListener('keyup', handleKeyUp);       // キー離し
inputElement.addEventListener('keypress', handleKeyPress); // キー入力

// フォームイベント
form.addEventListener('submit', handleSubmit);         // フォーム送信
input.addEventListener('change', handleChange);        // 値変更
input.addEventListener('input', handleInput);          // 入力中
input.addEventListener('focus', handleFocus);          // フォーカス取得
input.addEventListener('blur', handleBlur);            // フォーカス失う

// ウィンドウイベント
window.addEventListener('load', handleLoad);           // ページ読み込み完了
window.addEventListener('resize', handleResize);       // ウィンドウサイズ変更
window.addEventListener('scroll', handleScroll);       // スクロール

// 実用例：フォームバリデーション
const emailInput = document.getElementById('email');
const emailError = document.getElementById('email-error');

emailInput.addEventListener('blur', function() {
    const email = this.value;
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    
    if (!emailRegex.test(email)) {
        emailError.textContent = '正しいメールアドレスを入力してください';
        emailError.style.display = 'block';
        this.classList.add('error');
    } else {
        emailError.style.display = 'none';
        this.classList.remove('error');
    }
});</div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">イベントオブジェクトの活用</h3>
                <div class="code-block">// イベントオブジェクトから情報を取得
function handleEvent(event) {
    console.log('イベントタイプ:', event.type);          // 'click', 'keydown' など
    console.log('ターゲット要素:', event.target);        // イベントが発生した要素
    console.log('現在のターゲット:', event.currentTarget); // リスナーが設定された要素
    console.log('マウス座標:', event.clientX, event.clientY); // マウス位置
    console.log('押されたキー:', event.key);             // キーボードイベントの場合
}

// イベントの制御
function handleFormSubmit(event) {
    event.preventDefault(); // デフォルト動作を阻止（フォーム送信を停止）
    
    // カスタム処理を実行
    const formData = new FormData(event.target);
    console.log('フォームデータ:', Object.fromEntries(formData));
}

function handleClick(event) {
    event.stopPropagation(); // イベント伝播を停止
    console.log('クリック処理完了');
}

// 実用例：動的なメニュー制御
document.addEventListener('click', function(event) {
    const dropdownMenu = document.querySelector('.dropdown-menu');
    
    // メニューボタンクリック時
    if (event.target.matches('.dropdown-toggle')) {
        event.preventDefault();
        dropdownMenu.classList.toggle('show');
    }
    // メニュー外クリック時
    else if (!event.target.closest('.dropdown')) {
        dropdownMenu.classList.remove('show');
    }
});</div>
            </div>

            <div class="demo-area">
                <h4 class="text-lg font-semibold mb-3">実習：イベント処理</h4>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h5 class="font-medium mb-2">マウスイベント</h5>
                        <div id="mouseArea" class="bg-blue-100 p-6 rounded text-center cursor-pointer transition-colors">
                            マウスを動かしてみてください
                        </div>
                        <p id="mouseInfo" class="text-sm text-gray-600 mt-2">座標情報がここに表示されます</p>
                    </div>
                    <div>
                        <h5 class="font-medium mb-2">キーボードイベント</h5>
                        <input type="text" id="keyInput" placeholder="キーを入力してください" class="w-full p-3 border rounded">
                        <p id="keyInfo" class="text-sm text-gray-600 mt-2">キー情報がここに表示されます</p>
                    </div>
                </div>
                <div class="mt-6">
                    <h5 class="font-medium mb-2">フォームイベント</h5>
                    <form id="demoForm" class="space-y-3">
                        <input type="email" id="demoEmail" placeholder="メールアドレス" required class="w-full p-2 border rounded">
                        <div id="demoEmailError" class="text-red-500 text-sm hidden"></div>
                        <button type="submit" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
                            送信テスト
                        </button>
                    </form>
                    <div id="formResult" class="mt-3 p-3 rounded hidden"></div>
                </div>
            </div>
        </section>

        <!-- 実践プロジェクト -->
        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">
                <i class="fas fa-project-diagram text-red-500 mr-2"></i>4. 実践プロジェクト：TODOリストアプリ
            </h2>

            <div class="mb-6">
                <p class="text-gray-600 mb-4">学習した技術を組み合わせて、実用的なTODOリストアプリを作成してみましょう。</p>
                
                <div class="demo-area">
                    <h4 class="text-lg font-semibold mb-3">TODOリストアプリ</h4>
                    <div class="mb-4">
                        <div class="flex gap-2 mb-3">
                            <input type="text" id="todoInput" placeholder="新しいタスクを入力..." class="flex-1 p-2 border rounded">
                            <button onclick="addTodo()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">
                                <i class="fas fa-plus mr-1"></i>追加
                            </button>
                        </div>
                        <div class="flex gap-2 mb-3">
                            <button onclick="filterTodos('all')" class="filter-btn bg-gray-300 hover:bg-gray-400 px-3 py-1 rounded text-sm">
                                すべて
                            </button>
                            <button onclick="filterTodos('pending')" class="filter-btn bg-yellow-300 hover:bg-yellow-400 px-3 py-1 rounded text-sm">
                                未完了
                            </button>
                            <button onclick="filterTodos('completed')" class="filter-btn bg-green-300 hover:bg-green-400 px-3 py-1 rounded text-sm">
                                完了済み
                            </button>
                            <button onclick="clearCompleted()" class="bg-red-300 hover:bg-red-400 px-3 py-1 rounded text-sm">
                                完了済みを削除
                            </button>
                        </div>
                    </div>
                    <ul id="todoList" class="space-y-2 min-h-32"></ul>
                    <div id="todoStats" class="mt-4 text-sm text-gray-600"></div>
                </div>

                <div class="mt-6">
                    <h4 class="text-lg font-semibold mb-3">実装のポイント</h4>
                    <div class="code-block">// TODOリストの実装例
let todos = JSON.parse(localStorage.getItem('todos')) || [];
let currentFilter = 'all';

// タスク追加
function addTodo() {
    const input = document.getElementById('todoInput');
    const text = input.value.trim();
    
    if (text === '') return;
    
    const todo = {
        id: Date.now(),
        text: text,
        completed: false,
        createdAt: new Date().toISOString()
    };
    
    todos.push(todo);
    saveTodos();
    renderTodos();
    input.value = '';
}

// タスク完了切り替え
function toggleTodo(id) {
    todos = todos.map(todo => 
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
    );
    saveTodos();
    renderTodos();
}

// タスク削除
function deleteTodo(id) {
    todos = todos.filter(todo => todo.id !== id);
    saveTodos();
    renderTodos();
}

// フィルタリング
function filterTodos(filter) {
    currentFilter = filter;
    renderTodos();
    
    // フィルタボタンのスタイル更新
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('bg-blue-500', 'text-white');
        btn.classList.add('bg-gray-300');
    });
    event.target.classList.remove('bg-gray-300');
    event.target.classList.add('bg-blue-500', 'text-white');
}

// ローカルストレージに保存
function saveTodos() {
    localStorage.setItem('todos', JSON.stringify(todos));
}</div>
                </div>
            </div>
        </section>

        <!-- 演習問題 -->
        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">
                <i class="fas fa-dumbbell text-orange-500 mr-2"></i>5. 演習問題
            </h2>

            <div class="exercise-area mb-6">
                <h3 class="text-lg font-semibold text-blue-800 mb-3">演習1: 電卓アプリの作成</h3>
                <p class="mb-3">基本的な四則演算ができる電卓を作成してください。</p>
                <ul class="list-disc list-inside text-sm mb-4 space-y-1">
                    <li>数字入力ボタン（0-9）</li>
                    <li>演算子ボタン（+, -, *, /）</li>
                    <li>等号ボタン（=）とクリアボタン（C）</li>
                    <li>計算結果の表示エリア</li>
                </ul>
                <button onclick="showExercise1Solution()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">
                    解答例を表示
                </button>
                <div sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" id="exercise1Solution" class="hidden mt-4 p-4 bg-gray-50 rounded border-l-4 border-blue-400"></div>
            </div>

            <div class="exercise-area mb-6">
                <h3 class="text-lg font-semibold text-blue-800 mb-3">演習2: 画像ギャラリーの作成</h3>
                <p class="mb-3">クリックで画像を切り替えられるギャラリーを作成してください。</p>
                <ul class="list-disc list-inside text-sm mb-4 space-y-1">
                    <li>メイン画像表示エリア</li>
                    <li>サムネイル画像一覧</li>
                    <li>前へ・次へボタン</li>
                    <li>現在の画像番号表示</li>
                </ul>
                <button onclick="showExercise2Solution()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded text-sm">
                    解答例を表示
                </button>
                <div sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" id="exercise2Solution" class="hidden mt-4 p-4 bg-gray-50 rounded border-l-4 border-green-400"></div>
            </div>

            <div class="exercise-area">
                <h3 class="text-lg font-semibold text-blue-800 mb-3">演習3: フォームバリデーション</h3>
                <p class="mb-3">入力チェック機能付きの会員登録フォームを作成してください。</p>
                <ul class="list-disc list-inside text-sm mb-4 space-y-1">
                    <li>ユーザー名（3文字以上）</li>
                    <li>メールアドレス（形式チェック）</li>
                    <li>パスワード（8文字以上、英数字含む）</li>
                    <li>パスワード確認（一致チェック）</li>
                    <li>リアルタイムエラー表示</li>
                </ul>
                <button onclick="showExercise3Solution()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded text-sm">
                    解答例を表示
                </button>
                <div sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" id="exercise3Solution" class="hidden mt-4 p-4 bg-gray-50 rounded border-l-4 border-purple-400"></div>
            </div>
        </section>

        <!-- 理解度クイズ -->
        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">
                <i class="fas fa-question-circle text-indigo-500 mr-2"></i>6. 理解度クイズ
            </h2>

            <div class="space-y-6">
                <div class="p-4 border border-gray-200 rounded-lg">
                    <h3 class="font-semibold mb-3">Q1. 適切な変数宣言はどれですか？</h3>
                    <div class="space-y-2">
                        <label class="flex items-center"><input type="radio" name="q1" value="a" class="mr-2"> const userName = "田中"; userName = "佐藤";</label>
                        <label class="flex items-center"><input type="radio" name="q1" value="b" class="mr-2"> let userName = "田中"; userName = "佐藤";</label>
                        <label class="flex items-center"><input type="radio" name="q1" value="c" class="mr-2"> var userName = "田中"; const userName = "佐藤";</label>
                        <label class="flex items-center"><input type="radio" name="q1" value="d" class="mr-2"> let userName; userName = userName + "さん";</label>
                    </div>
                    <button onclick="checkAnswer('q1', 'b')" class="mt-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">回答チェック</button>
                    <div id="q1-result" class="mt-2 text-sm"></div>
                </div>

                <div class="p-4 border border-gray-200 rounded-lg">
                    <h3 class="font-semibold mb-3">Q2. DOM要素を安全に取得する方法はどれですか？</h3>
                    <div class="space-y-2">
                        <label class="flex items-center"><input type="radio" name="q2" value="a" class="mr-2"> document.getElementById('btn').click();</label>
                        <label class="flex items-center"><input type="radio" name="q2" value="b" class="mr-2"> const btn = document.getElementById('btn'); if(btn) btn.click();</label>
                        <label class="flex items-center"><input type="radio" name="q2" value="c" class="mr-2"> document.querySelector('#btn').innerHTML = 'クリック';</label>
                        <label class="flex items-center"><input type="radio" name="q2" value="d" class="mr-2"> $('#btn').click(); // jQuery</label>
                    </div>
                    <button onclick="checkAnswer('q2', 'b')" class="mt-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">回答チェック</button>
                    <div id="q2-result" class="mt-2 text-sm"></div>
                </div>

                <div class="p-4 border border-gray-200 rounded-lg">
                    <h3 class="font-semibold mb-3">Q3. イベントリスナーの推奨する書き方はどれですか？</h3>
                    <div class="space-y-2">
                        <label class="flex items-center"><input type="radio" name="q3" value="a" class="mr-2"> &lt;button onclick="handleClick()"&gt;ボタン&lt;/button&gt;</label>
                        <label class="flex items-center"><input type="radio" name="q3" value="b" class="mr-2"> button.onclick = handleClick;</label>
                        <label class="flex items-center"><input type="radio" name="q3" value="c" class="mr-2"> button.addEventListener('click', handleClick);</label>
                        <label class="flex items-center"><input type="radio" name="q3" value="d" class="mr-2"> button.attachEvent('onclick', handleClick);</label>
                    </div>
                    <button onclick="checkAnswer('q3', 'c')" class="mt-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">回答チェック</button>
                    <div id="q3-result" class="mt-2 text-sm"></div>
                </div>
            </div>

            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                <h3 class="font-semibold text-blue-800 mb-2">クイズ結果</h3>
                <div sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" id="quizResults" class="text-sm text-gray-600">
                    すべての問題に回答すると、結果がここに表示されます。
                </div>
            </div>
        </section>

        <!-- まとめ -->
        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">
                <i class="fas fa-check-circle text-green-500 mr-2"></i>7. まとめ
            </h2>

            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-blue-800 mb-3">JavaScript基礎</h3>
                    <ul class="text-sm space-y-1">
                        <li>• <strong>変数宣言</strong>: const（定数）、let（変数）を適切に使い分け</li>
                        <li>• <strong>データ型</strong>: Number, String, Boolean, Object, Array の理解</li>
                        <li>• <strong>関数</strong>: 宣言、式、アロー関数の使い分けとスコープの理解</li>
                        <li>• <strong>制御構文</strong>: 条件分岐、ループの効果的な活用</li>
                    </ul>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-green-800 mb-3">DOM操作</h3>
                    <ul class="text-sm space-y-1">
                        <li>• <strong>要素取得</strong>: getElementById, querySelector の使い分け</li>
                        <li>• <strong>内容変更</strong>: textContent, innerHTML の安全な使用</li>
                        <li>• <strong>スタイル操作</strong>: classList, style プロパティの活用</li>
                        <li>• <strong>動的生成</strong>: createElement, appendChild による要素作成</li>
                    </ul>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-purple-800 mb-3">イベント処理</h3>
                    <ul class="text-sm space-y-1">
                        <li>• <strong>イベント監視</strong>: addEventListener による適切なイベント処理</li>
                        <li>• <strong>イベント制御</strong>: preventDefault, stopPropagation の活用</li>
                        <li>• <strong>ユーザー操作</strong>: マウス、キーボード、フォームイベント対応</li>
                        <li>• <strong>動的UI</strong>: インタラクティブな機能の実装</li>
                    </ul>
                </div>
                <div class="bg-yellow-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-yellow-800 mb-3">実践スキル</h3>
                    <ul class="text-sm space-y-1">
                        <li>• <strong>エラー処理</strong>: 要素存在確認、try-catch の使用</li>
                        <li>• <strong>データ永続化</strong>: localStorage による状態保存</li>
                        <li>• <strong>ユーザビリティ</strong>: バリデーション、フィードバック機能</li>
                        <li>• <strong>実用アプリ</strong>: TODOリスト、電卓などの完全動作</li>
                    </ul>
                </div>
            </div>

            <div class="bg-gray-50 p-6 rounded-lg">
                <h3 class="text-lg font-semibold text-gray-800 mb-3">次回学習内容の予告</h3>
                <p class="text-gray-600 mb-3"><strong>Day41: モダンJavaScript・ES6+・非同期処理</strong></p>
                <ul class="text-sm text-gray-600 space-y-1">
                    <li>• ES6+の新機能（アロー関数、分割代入、テンプレートリテラル）</li>
                    <li>• Promise と async/await による非同期処理</li>
                    <li>• Fetch API を使ったサーバー通信</li>
                    <li>• モジュールシステムとimport/export</li>
                </ul>
            </div>
        </section>

        <!-- フッター -->
        <footer class="text-center text-gray-500 text-sm">
            <p>&copy; 2024 ITエンジニア育成カリキュラム - Day40: JavaScript基礎・DOM操作・イベント処理</p>
        </footer>
    </div>

    <script>
        // JavaScript基礎デモ
        function demoVariables() {
            const name = "田中太郎";
            let age = 25;
            const result = `変数デモ:<br>
                名前（const）: ${name}<br>
                年齢（let）: ${age}<br>
                誕生日後の年齢: ${++age}`;
            document.getElementById('jsBasicsResult').innerHTML = result;
        }

        function demoFunctions() {
            const calculateTax = (price) => Math.round(price * 1.1);
            const formatPrice = (price) => price.toLocaleString() + '円';
            
            const basePrice = 1000;
            const taxIncluded = calculateTax(basePrice);
            
            const result = `関数デモ:<br>
                基本価格: ${formatPrice(basePrice)}<br>
                税込価格: ${formatPrice(taxIncluded)}<br>
                関数の組み合わせで計算完了！`;
            document.getElementById('jsBasicsResult').innerHTML = result;
        }

        function demoCalculator() {
            const numbers = [10, 20, 30];
            const sum = numbers.reduce((a, b) => a + b, 0);
            const average = sum / numbers.length;
            
            const result = `配列計算デモ:<br>
                数値: [${numbers.join(', ')}]<br>
                合計: ${sum}<br>
                平均: ${average}`;
            document.getElementById('jsBasicsResult').innerHTML = result;
        }

        // DOM操作デモ
        function changeText() {
            const input = document.getElementById('textInput');
            const target = document.getElementById('demoTarget');
            const newText = input.value.trim() || 'テキストが変更されました！';
            target.textContent = newText;
        }

        function changeStyle() {
            const target = document.getElementById('demoTarget');
            const colors = ['bg-red-100', 'bg-green-100', 'bg-yellow-100', 'bg-purple-100', 'bg-blue-100'];
            const currentClass = Array.from(target.classList).find(c => colors.includes(c));
            const currentIndex = colors.indexOf(currentClass);
            const nextIndex = (currentIndex + 1) % colors.length;
            
            target.classList.remove(currentClass);
            target.classList.add(colors[nextIndex]);
        }

        function toggleClass() {
            const target = document.getElementById('demoTarget');
            target.classList.toggle('transform');
            target.classList.toggle('scale-110');
            target.classList.toggle('rotate-3');
        }

        let elementCounter = 0;
        function createElement() {
            elementCounter++;
            const container = document.getElementById('newElementsContainer');
            const newElement = document.createElement('div');
            newElement.className = 'bg-yellow-100 p-3 rounded-lg mb-2 flex justify-between items-center';
            newElement.innerHTML = `
                <span>動的要素 #${elementCounter}</span>
                <button onclick="this.parentElement.remove()" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm">
                    削除
                </button>
            `;
            container.appendChild(newElement);
        }

        // イベント処理デモ
        document.getElementById('mouseArea').addEventListener('mouseenter', function() {
            this.style.backgroundColor = '#3b82f6';
            this.style.color = 'white';
            this.textContent = 'マウスが入りました！';
        });

        document.getElementById('mouseArea').addEventListener('mouseleave', function() {
            this.style.backgroundColor = '#dbeafe';
            this.style.color = '#1f2937';
            this.textContent = 'マウスを動かしてみてください';
        });

        document.getElementById('mouseArea').addEventListener('mousemove', function(event) {
            const rect = this.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            document.getElementById('mouseInfo').textContent = `座標: (${Math.round(x)}, ${Math.round(y)})`;
        });

        document.getElementById('keyInput').addEventListener('keydown', function(event) {
            const info = `キー: ${event.key} | コード: ${event.code} | Ctrl: ${event.ctrlKey} | Shift: ${event.shiftKey}`;
            document.getElementById('keyInfo').textContent = info;
        });

        // フォームバリデーション
        document.getElementById('demoEmail').addEventListener('blur', function() {
            const email = this.value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const errorDiv = document.getElementById('demoEmailError');
            
            if (email && !emailRegex.test(email)) {
                errorDiv.textContent = '正しいメールアドレスを入力してください';
                errorDiv.classList.remove('hidden');
                this.classList.add('border-red-500');
            } else {
                errorDiv.classList.add('hidden');
                this.classList.remove('border-red-500');
            }
        });

        document.getElementById('demoForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const email = document.getElementById('demoEmail').value;
            const resultDiv = document.getElementById('formResult');
            
            if (email) {
                resultDiv.innerHTML = `<span class="text-green-600">送信成功！メール: ${email}</span>`;
                resultDiv.classList.remove('hidden', 'bg-red-100');
                resultDiv.classList.add('bg-green-100');
            } else {
                resultDiv.innerHTML = `<span class="text-red-600">メールアドレスを入力してください</span>`;
                resultDiv.classList.remove('hidden', 'bg-green-100');
                resultDiv.classList.add('bg-red-100');
            }
        });

        // TODOリスト実装
        let todos = JSON.parse(localStorage.getItem('todos')) || [];
        let currentFilter = 'all';

        function addTodo() {
            const input = document.getElementById('todoInput');
            const text = input.value.trim();
            
            if (text === '') return;
            
            const todo = {
                id: Date.now(),
                text: text,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            todos.push(todo);
            saveTodos();
            renderTodos();
            input.value = '';
        }

        function toggleTodo(id) {
            todos = todos.map(todo => 
                todo.id === id ? { ...todo, completed: !todo.completed } : todo
            );
            saveTodos();
            renderTodos();
        }

        function deleteTodo(id) {
            todos = todos.filter(todo => todo.id !== id);
            saveTodos();
            renderTodos();
        }

        function filterTodos(filter) {
            currentFilter = filter;
            renderTodos();
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-blue-500', 'text-white');
                btn.classList.add('bg-gray-300');
            });
            event.target.classList.remove('bg-gray-300');
            event.target.classList.add('bg-blue-500', 'text-white');
        }

        function clearCompleted() {
            todos = todos.filter(todo => !todo.completed);
            saveTodos();
            renderTodos();
        }

        function saveTodos() {
            localStorage.setItem('todos', JSON.stringify(todos));
        }

        function renderTodos() {
            const todoList = document.getElementById('todoList');
            const filteredTodos = todos.filter(todo => {
                if (currentFilter === 'pending') return !todo.completed;
                if (currentFilter === 'completed') return todo.completed;
                return true;
            });

            todoList.innerHTML = filteredTodos.map(todo => `
                <li class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                        <input type="checkbox" ${todo.completed ? 'checked' : ''} 
                               onchange="toggleTodo(${todo.id})" class="mr-3">
                        <span class="${todo.completed ? 'line-through text-gray-500' : ''}">${todo.text}</span>
                    </div>
                    <button onclick="deleteTodo(${todo.id})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm">
                        削除
                    </button>
                </li>
            `).join('');

            // 統計更新
            const total = todos.length;
            const completed = todos.filter(t => t.completed).length;
            const pending = total - completed;
            document.getElementById('todoStats').textContent = 
                `合計: ${total} | 完了: ${completed} | 未完了: ${pending}`;
        }

        // Enter キーでタスク追加
        document.getElementById('todoInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                addTodo();
            }
        });

        // ページ読み込み時にTODOを表示
        document.addEventListener('DOMContentLoaded', function() {
            renderTodos();
        });

        // 演習問題の解答表示
        function showExercise1Solution() {
            const solution = `
                <h4 class="font-semibold mb-2">電卓アプリの実装例</h4>
                <pre class="text-sm bg-gray-100 p-3 rounded overflow-x-auto">
let display = document.getElementById('display');
let currentInput = '0';
let operator = null;
let previousInput = null;

function inputNumber(num) {
    if (currentInput === '0') {
        currentInput = num.toString();
    } else {
        currentInput += num.toString();
    }
    updateDisplay();
}

function inputOperator(op) {
    if (operator && previousInput) {
        calculate();
    }
    operator = op;
    previousInput = currentInput;
    currentInput = '0';
}

function calculate() {
    const prev = parseFloat(previousInput);
    const current = parseFloat(currentInput);
    let result;
    
    switch(operator) {
        case '+': result = prev + current; break;
        case '-': result = prev - current; break;
        case '*': result = prev * current; break;
        case '/': result = prev / current; break;
        default: return;
    }
    
    currentInput = result.toString();
    operator = null;
    previousInput = null;
    updateDisplay();
}

function clearAll() {
    currentInput = '0';
    operator = null;
    previousInput = null;
    updateDisplay();
}
                </pre>
            `;
            const solutionDiv = document.getElementById('exercise1Solution');
            solutionDiv.innerHTML = solution;
            solutionDiv.classList.remove('hidden');
        }

        function showExercise2Solution() {
            const solution = `
                <h4 class="font-semibold mb-2">画像ギャラリーの実装例</h4>
                <pre class="text-sm bg-gray-100 p-3 rounded overflow-x-auto">
let currentImageIndex = 0;
const images = [
    { src: 'image1.jpg', alt: '画像1' },
    { src: 'image2.jpg', alt: '画像2' },
    { src: 'image3.jpg', alt: '画像3' }
];

function showImage(index) {
    const mainImage = document.getElementById('mainImage');
    const imageCounter = document.getElementById('imageCounter');
    
    currentImageIndex = index;
    mainImage.src = images[index].src;
    mainImage.alt = images[index].alt;
    imageCounter.textContent = \`\${index + 1} / \${images.length}\`;
    
    // サムネイルのアクティブ状態更新
    document.querySelectorAll('.thumbnail').forEach((thumb, i) => {
        thumb.classList.toggle('active', i === index);
    });
}

function nextImage() {
    const nextIndex = (currentImageIndex + 1) % images.length;
    showImage(nextIndex);
}

function previousImage() {
    const prevIndex = (currentImageIndex - 1 + images.length) % images.length;
    showImage(prevIndex);
}

// キーボード操作対応
document.addEventListener('keydown', (event) => {
    if (event.key === 'ArrowRight') nextImage();
    if (event.key === 'ArrowLeft') previousImage();
});
                </pre>
            `;
            const solutionDiv = document.getElementById('exercise2Solution');
            solutionDiv.innerHTML = solution;
            solutionDiv.classList.remove('hidden');
        }

        function showExercise3Solution() {
            const solution = `
                <h4 class="font-semibold mb-2">フォームバリデーションの実装例</h4>
                <pre class="text-sm bg-gray-100 p-3 rounded overflow-x-auto">
const validators = {
    username: (value) => {
        if (value.length < 3) return 'ユーザー名は3文字以上で入力してください';
        return null;
    },
    
    email: (value) => {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(value)) return '正しいメールアドレスを入力してください';
        return null;
    },
    
    password: (value) => {
        if (value.length < 8) return 'パスワードは8文字以上で入力してください';
        if (!/(?=.*[a-zA-Z])(?=.*[0-9])/.test(value)) {
            return 'パスワードは英数字を含む必要があります';
        }
        return null;
    },
    
    confirmPassword: (value, originalPassword) => {
        if (value !== originalPassword) return 'パスワードが一致しません';
        return null;
    }
};

function validateField(fieldName, value, compareValue = null) {
    const validator = validators[fieldName];
    const error = validator(value, compareValue);
    const errorElement = document.getElementById(\`\${fieldName}-error\`);
    const inputElement = document.getElementById(fieldName);
    
    if (error) {
        errorElement.textContent = error;
        errorElement.style.display = 'block';
        inputElement.classList.add('error');
        return false;
    } else {
        errorElement.style.display = 'none';
        inputElement.classList.remove('error');
        return true;
    }
}

// リアルタイムバリデーション
document.getElementById('username').addEventListener('blur', function() {
    validateField('username', this.value);
});

document.getElementById('email').addEventListener('blur', function() {
    validateField('email', this.value);
});

document.getElementById('password').addEventListener('blur', function() {
    validateField('password', this.value);
});

document.getElementById('confirmPassword').addEventListener('blur', function() {
    const password = document.getElementById('password').value;
    validateField('confirmPassword', this.value, password);
});
                </pre>
            `;
            const solutionDiv = document.getElementById('exercise3Solution');
            solutionDiv.innerHTML = solution;
            solutionDiv.classList.remove('hidden');
        }

        // クイズ機能
        let quizAnswers = {};

        function checkAnswer(questionId, correctAnswer) {
            const selectedAnswer = document.querySelector(`input[name="${questionId}"]:checked`);
            const resultDiv = document.getElementById(`${questionId}-result`);
            
            if (!selectedAnswer) {
                resultDiv.innerHTML = '<span class="text-yellow-600">選択肢を選んでください</span>';
                return;
            }
            
            const isCorrect = selectedAnswer.value === correctAnswer;
            quizAnswers[questionId] = isCorrect;
            
            if (isCorrect) {
                resultDiv.innerHTML = '<span class="text-green-600">✓ 正解です！</span>';
            } else {
                resultDiv.innerHTML = '<span class="text-red-600">✗ 不正解です。再度確認してみましょう。</span>';
            }
            
            updateQuizResults();
        }

        function updateQuizResults() {
            const totalQuestions = 3;
            const answeredQuestions = Object.keys(quizAnswers).length;
            const correctAnswers = Object.values(quizAnswers).filter(answer => answer).length;
            
            if (answeredQuestions === totalQuestions) {
                const percentage = Math.round((correctAnswers / totalQuestions) * 100);
                const resultDiv = document.getElementById('quizResults');
                
                let message = `${totalQuestions}問中${correctAnswers}問正解（${percentage}%）`;
                if (percentage >= 80) {
                    message += ' - 素晴らしい理解度です！';
                    resultDiv.className = 'text-sm text-green-600';
                } else if (percentage >= 60) {
                    message += ' - もう少し復習してみましょう。';
                    resultDiv.className = 'text-sm text-yellow-600';
                } else {
                    message += ' - 講義内容を再度確認することをお勧めします。';
                    resultDiv.className = 'text-sm text-red-600';
                }
                
                resultDiv.textContent = message;
            }
        }
    </script>
    </div>
    </main>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDnMhOL4I%2BT%2FeZqjvRC3%2FjaheLAUiDeiZyTZurfx73Db1l4RMX092bnnjxXm%2BrCZl4x54CLMV4onTDtdJPyQHXWae%2BGbb2GolUhziMhNrICEYrMkJUxFKZv7ZaVXXa7WWGg59yaU1pUXZp3TGFjRQODDNKOX0xhp%2FGQTTgL%2BUTwJHdsdAw6T34oconS%2BZJYDJDI%2FqW%2B%2B2ZrRMJfc0UXfBUuwVTweQNRdiUi6Pxq68mHxbonb1KiqD%2BkVroL%2B31dFXx6oxZrYa4wFlqcCGdxS5%2B1UOieP2d9PjjSxpYeSwaxD%2BjDTroIMxoDI88lxq64ZGn6V6FpPgDsGB%2BL6BW9C3yLhYa%2BeCL7djVfqri7WcYheFMI4G0imc%2F4T7aZznKQBq5Dbewm%2FfuoNS6dK15mu6o5QQHepYrxyhDaKuitIqx0G8X7zjdpcL8NgZd9VqPWAqeCI%2FBYDXY1QTG50DI6E4IjLZUHtGPbyTf3ZAgXhGf3ZGfrs6UYVTjcJq1%2BFL%2FCShXQ%3D%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDnMhOL4I+T/eZqjvRC3/jaheLAUiDeiZyTZurfx73Db1l4RMX092bnnjxXm+rCZl4x54CLMV4onTDtdJPyQHXWae+Gbb2GolUhziMhNrICEYrMkJUxFKZv7ZaVXXa7WWGg59yaU1pUXZp3TGFjRQODDNKOX0xhp/GQTTgL+UTwJHdsdAw6T34oconS+ZJYDJDI/qW++2ZrRMJfc0UXfBUuwVTweQNRdiUi6Pxq68mHxbonb1KiqD+kVroL+31dFXx6oxZrYa4wFlqcCGdxS5+1UOieP2d9PjjSxpYeSwaxD+jDTroIMxoDI88lxq64ZGn6V6FpPgDsGB+L6BW9C3yLhYa+eCL7djVfqri7WcYheFMI4G0imc/4T7aZznKQBq5Dbewm/fuoNS6dK15mu6o5QQHepYrxyhDaKuitIqx0G8X7zjdpcL8NgZd9VqPWAqeCI/BYDXY1QTG50DI6E4IjLZUHtGPbyTf3ZAgXhGf3ZGfrs6UYVTjcJq1+FL/CShXQ==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    