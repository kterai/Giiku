<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day23: データベース理論 - ITエンジニア育成カリキュラム</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', 'Meiryo', sans-serif;
            line-height: 1.7;
            color: #2d3748;
        }
        .header-nav {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 0;
            margin-bottom: 24px;
        }
        .content-section {
            background: #f7fafc;
            border-radius: 12px;
            padding: 24px;
            margin: 24px 0;
            border-left: 6px solid #4299e1;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        .highlight-box {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
            border-left: 4px solid #38b2ac;
        }
        .code-block {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 16px 0;
            overflow-x: auto;
        }
        .table-container {
            overflow-x: auto;
            margin: 16px 0;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        .comparison-table th {
            background: #4299e1;
            color: white;
            padding: 16px;
            font-weight: 600;
            text-align: left;
        }
        .comparison-table td {
            padding: 16px;
            border-bottom: 1px solid #e2e8f0;
            vertical-align: top;
        }
        .comparison-table tr:hover {
            background: #f7fafc;
        }
        .answer-section {
            background: #f0fff4;
            border: 2px solid #48bb78;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
            display: none;
        }
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            text-decoration: none;
            display: inline-block;
        }
        .btn-primary {
            background: #4299e1;
            color: white;
        }
        .btn-primary:hover {
            background: #3182ce;
        }
        .btn-secondary {
            background: #718096;
            color: white;
        }
        .btn-secondary:hover {
            background: #4a5568;
        }
        .warning-box {
            background: #fef5e7;
            border: 2px solid #f6ad55;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        .er-diagram {
            background: white;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
            text-align: center;
        }
        .fixed-nav {
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.95);
        }
        .nav-link:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }
        .breadcrumb-separator::after {
            content: ">";
            margin: 0 8px;
            color: #9CA3AF;
        }
    </style>
</head>
<body class="bg-gray-50">
    <nav class="fixed top-0 left-0 right-0 z-50 fixed-nav border-b border-gray-200">
        <!-- メインナビゲーションバー -->
        <div class="bg-blue-600 text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-12">
                    <div class="flex items-center">
                        <i class="fas fa-graduation-cap mr-2"></i>
                        <span class="font-semibold">ITエンジニア育成カリキュラム</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="./day22_lecture.html" class="nav-link px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                            <i class="fas fa-chevron-left mr-1"></i> 前の講義
                        </a>
                        <a href="./day24_lecture.html" class="nav-link px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                            次の講義 <i class="fas fa-chevron-right ml-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-white px-4 py-3">
            <div class="max-w-7xl mx-auto">
                <div class="flex items-center justify-between">
                    <div class="flex items-center text-sm text-gray-600">
                        <a href="../index.html" class="hover:text-blue-600"><i class="fas fa-home mr-1"></i>ホーム</a>
                        <span class="breadcrumb-separator"></span>
                        <a href="../month/month2.html" class="hover:text-blue-600">2ヶ月目: 基本情報</a>
                        <span class="breadcrumb-separator"></span>
                        <a href="../week/week5.html" class="hover:text-blue-600">5週目: コンピュータシステム</a>
                        <span class="breadcrumb-separator"></span>
                        <span class="font-semibold text-blue-600">23日目: データベース理論</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <a href="../day/day23.html" class="inline-flex items-center px-3 py-1 border border-blue-300 rounded-md text-sm text-blue-600 hover:bg-blue-50 transition-colors">
                            <i class="fas fa-clipboard-list mr-1"></i> 本日の概要
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <main class="pt-32">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- メインタイトル -->
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-800 mb-4">
                <i class="fas fa-database text-blue-600 mr-3"></i>
                Day23: データベース理論
            </h1>
            <p class="text-xl text-gray-600">正規化・SQL・トランザクション・E-R図の総合学習</p>
            <div class="text-sm text-gray-500 mt-2">
                <span>所要時間: 4時間</span> | 
                <span>対象: 基本情報技術者試験受験者</span> | 
                <span>難易度: 中級</span>
            </div>
        </header>

        <!-- 学習目標 -->
        <section class="content-section">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">
                <i class="fas fa-target text-green-600 mr-2"></i>本日の学習目標
            </h2>
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <h3 class="text-lg font-semibold mb-3 text-blue-700">知識目標</h3>
                    <ul class="list-disc pl-6 space-y-2">
                        <li>データベースの基本概念とRDBMSの仕組みを理解する</li>
                        <li>正規化（第1正規形～第3正規形）の理論と実践を習得する</li>
                        <li>SQLの基本文法から応用まで幅広く学習する</li>
                        <li>トランザクション処理とACID特性を理解する</li>
                        <li>E-R図によるデータベース設計手法を身につける</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-3 text-green-700">実践目標</h3>
                    <ul class="list-disc pl-6 space-y-2">
                        <li>実際のビジネス要件からE-R図を作成できる</li>
                        <li>適切な正規化を実施してテーブル設計ができる</li>
                        <li>複雑なSQL文を記述して目的のデータを取得できる</li>
                        <li>基本情報技術者試験のDB問題を解答できる</li>
                        <li>実務レベルのデータベース設計ができる</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- スケジュール -->
        <section class="content-section">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">
                <i class="fas fa-clock text-purple-600 mr-2"></i>本日のスケジュール
            </h2>
            <div class="table-container">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th class="w-32">時間</th>
                            <th>学習内容</th>
                            <th>重要ポイント</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="font-semibold">9:00-10:30</td>
                            <td>データベース基礎・E-R図設計</td>
                            <td>エンティティとリレーションシップの理解</td>
                        </tr>
                        <tr>
                            <td class="font-semibold">10:45-12:00</td>
                            <td>正規化理論と実践</td>
                            <td>第1～第3正規形の段階的適用</td>
                        </tr>
                        <tr>
                            <td class="font-semibold">13:00-14:30</td>
                            <td>SQL基礎から応用</td>
                            <td>複雑な結合とサブクエリの習得</td>
                        </tr>
                        <tr>
                            <td class="font-semibold">14:45-16:00</td>
                            <td>トランザクション処理</td>
                            <td>ACID特性と同時実行制御</td>
                        </tr>
                        <tr>
                            <td class="font-semibold">16:15-17:30</td>
                            <td>総合演習・模擬試験</td>
                            <td>基本情報技術者試験レベルの問題演習</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- データベース基礎 -->
        <section class="content-section">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">
                <i class="fas fa-database text-blue-600 mr-2"></i>1. データベース基礎知識
            </h2>
            
            <div class="highlight-box mb-6">
                <h3 class="text-xl font-semibold mb-4">データベースとは</h3>
                <p class="mb-4"><strong>データベース（Database）</strong>とは、組織的に整理されたデータの集合体です。「図書館の本の管理システム」のように、大量の情報を効率的に格納・検索・更新できる仕組みです。</p>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-2 text-blue-700">従来のファイル管理の問題点</h4>
                        <ul class="list-disc pl-6 space-y-1 text-sm">
                            <li>データの重複（同じ顧客情報が複数ファイルに）</li>
                            <li>データの不整合（更新漏れによる食い違い）</li>
                            <li>検索・集計の困難さ</li>
                            <li>同時アクセス時の競合問題</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2 text-green-700">データベースの利点</h4>
                        <ul class="list-disc pl-6 space-y-1 text-sm">
                            <li>データの一元管理による重複排除</li>
                            <li>整合性制約による品質保証</li>
                            <li>高速検索・複雑集計の実現</li>
                            <li>同時実行制御による安全性確保</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <h3 class="text-lg font-semibold mb-4">データベース管理システム（DBMS）の種類と特徴</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>種類</th>
                            <th>特徴</th>
                            <th>代表的な製品</th>
                            <th>適用場面</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>関係データベース（RDB）</strong></td>
                            <td>表形式でデータを管理。SQL言語で操作</td>
                            <td>Oracle, MySQL, PostgreSQL</td>
                            <td>業務システム全般</td>
                        </tr>
                        <tr>
                            <td><strong>NoSQL</strong></td>
                            <td>非構造化データに対応。水平スケール</td>
                            <td>MongoDB, Redis, Cassandra</td>
                            <td>ビッグデータ、Web系</td>
                        </tr>
                        <tr>
                            <td><strong>インメモリDB</strong></td>
                            <td>メインメモリ上でデータ処理。高速</td>
                            <td>SAP HANA, Redis</td>
                            <td>リアルタイム分析</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- E-R図設計 -->
        <section class="content-section">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">
                <i class="fas fa-project-diagram text-purple-600 mr-2"></i>2. E-R図（Entity-Relationship図）によるデータベース設計
            </h2>

            <div class="highlight-box mb-6">
                <h3 class="text-xl font-semibold mb-4">E-R図の基本概念</h3>
                <p class="mb-4"><strong>E-R図</strong>は、現実世界の情報をデータベースで表現するための設計図です。「組織図」や「関係図」のように、データ間の関係を視覚的に表現します。</p>
                
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="text-center">
                        <div class="bg-blue-100 border-2 border-blue-500 rounded-lg p-4 mb-2">
                            <strong>エンティティ（実体）</strong>
                        </div>
                        <p class="text-sm">管理対象となるもの<br>例：顧客、商品、注文</p>
                    </div>
                    <div class="text-center">
                        <div class="bg-green-100 border-2 border-green-500 rounded-full p-4 mb-2">
                            <strong>リレーションシップ（関連）</strong>
                        </div>
                        <p class="text-sm">エンティティ間の関係<br>例：顧客が商品を注文する</p>
                    </div>
                    <div class="text-center">
                        <div class="bg-yellow-100 border-2 border-yellow-500 rounded p-4 mb-2">
                            <strong>属性（アトリビュート）</strong>
                        </div>
                        <p class="text-sm">エンティティの特徴<br>例：顧客ID、顧客名、住所</p>
                    </div>
                </div>
            </div>

            <div class="er-diagram">
                <h3 class="text-lg font-semibold mb-4">ECサイトのE-R図例</h3>
                <div class="flex justify-center items-center space-x-8 flex-wrap">
                    <div class="bg-blue-100 border-2 border-blue-500 rounded-lg p-4 mb-4">
                        <strong>顧客</strong><br>
                        <small>顧客ID(PK)<br>顧客名<br>メール<br>住所</small>
                    </div>
                    <div class="text-2xl text-gray-500">—</div>
                    <div class="bg-green-100 border-2 border-green-500 rounded-full p-3 mb-4">
                        <strong>注文</strong><br>
                        <small>1:N</small>
                    </div>
                    <div class="text-2xl text-gray-500">—</div>
                    <div class="bg-blue-100 border-2 border-blue-500 rounded-lg p-4 mb-4">
                        <strong>注文</strong><br>
                        <small>注文ID(PK)<br>注文日<br>顧客ID(FK)<br>総額</small>
                    </div>
                </div>
                <p class="text-sm text-gray-600 mt-4">一人の顧客は複数の注文を行うことができる（1対多の関係）</p>
            </div>

            <div class="warning-box">
                <h4 class="font-semibold mb-2"><i class="fas fa-lightbulb text-yellow-600 mr-2"></i>実務でのE-R図作成ポイント</h4>
                <ul class="list-disc pl-6 space-y-1 text-sm">
                    <li><strong>業務理解が最重要</strong>：システム化対象業務の流れを正確に把握する</li>
                    <li><strong>主キーの選定</strong>：各エンティティを一意に識別できる属性を慎重に選ぶ</li>
                    <li><strong>正規化との連携</strong>：E-R図作成後に正規化を適用してテーブル設計を洗練</li>
                    <li><strong>ステークホルダーとの確認</strong>：業務担当者と設計内容を共有して認識合わせ</li>
                </ul>
            </div>
        </section>

        <!-- 正規化 -->
        <section class="content-section">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">
                <i class="fas fa-layer-group text-green-600 mr-2"></i>3. データベース正規化理論
            </h2>

            <div class="highlight-box mb-6">
                <h3 class="text-xl font-semibold mb-4">正規化とは</h3>
                <p class="mb-4"><strong>正規化（Normalization）</strong>とは、データの重複や不整合を排除し、効率的で安全なデータベース構造を作る手法です。「整理整頓」のように、散らかったデータを段階的に整理していきます。</p>
            </div>

            <!-- 第1正規形 -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-700">第1正規形（1NF：First Normal Form）</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-2 text-red-600">❌ 第1正規形に違反する例</h4>
                        <div class="code-block text-sm">
注文テーブル
顧客ID | 顧客名 | 商品名
1001   | 田中   | りんご,みかん,バナナ
1002   | 佐藤   | パン,牛乳
                        </div>
                        <p class="text-sm text-red-600 mt-2">問題：商品名に複数の値が格納されている（原子値でない）</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2 text-green-600">✅ 第1正規形に適合する例</h4>
                        <div class="code-block text-sm">
注文テーブル
顧客ID | 顧客名 | 商品名
1001   | 田中   | りんご
1001   | 田中   | みかん
1001   | 田中   | バナナ
1002   | 佐藤   | パン
1002   | 佐藤   | 牛乳
                        </div>
                        <p class="text-sm text-green-600 mt-2">解決：各属性が原子値（分割不可能な値）になっている</p>
                    </div>
                </div>
            </div>

            <!-- 第2正規形 -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-700">第2正規形（2NF：Second Normal Form）</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-2 text-red-600">❌ 第2正規形に違反する例</h4>
                        <div class="code-block text-sm">
注文明細テーブル
注文ID | 商品ID | 数量 | 商品名 | 単価
O001   | P001   | 2    | りんご | 100
O001   | P002   | 1    | みかん | 150
O002   | P001   | 3    | りんご | 100
                        </div>
                        <p class="text-sm text-red-600 mt-2">問題：商品名・単価が商品IDにのみ依存（部分関数従属）</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2 text-green-600">✅ 第2正規形に適合する例</h4>
                        <div class="code-block text-sm">
注文明細テーブル
注文ID | 商品ID | 数量
O001   | P001   | 2
O001   | P002   | 1
O002   | P001   | 3

商品テーブル
商品ID | 商品名 | 単価
P001   | りんご | 100
P002   | みかん | 150
                        </div>
                        <p class="text-sm text-green-600 mt-2">解決：商品情報を別テーブルに分離し、完全関数従属を実現</p>
                    </div>
                </div>
            </div>

            <!-- 第3正規形 -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-700">第3正規形（3NF：Third Normal Form）</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-2 text-red-600">❌ 第3正規形に違反する例</h4>
                        <div class="code-block text-sm">
顧客テーブル
顧客ID | 顧客名 | 住所     | 都道府県 | 地域
C001   | 田中   | 東京都... | 東京都   | 関東
C002   | 佐藤   | 大阪府... | 大阪府   | 関西
                        </div>
                        <p class="text-sm text-red-600 mt-2">問題：地域が都道府県に依存（推移関数従属）</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2 text-green-600">✅ 第3正規形に適合する例</h4>
                        <div class="code-block text-sm">
顧客テーブル
顧客ID | 顧客名 | 住所     | 都道府県ID
C001   | 田中   | 東京都... | P001
C002   | 佐藤   | 大阪府... | P002

都道府県テーブル
都道府県ID | 都道府県名 | 地域
P001       | 東京都     | 関東
P002       | 大阪府     | 関西
                        </div>
                        <p class="text-sm text-green-600 mt-2">解決：推移関数従属を排除し、直接関数従属のみに</p>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <h3 class="text-lg font-semibold mb-4">正規化レベル比較表</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>正規形</th>
                            <th>満たすべき条件</th>
                            <th>解決する問題</th>
                            <th>実務での重要度</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>第1正規形</strong></td>
                            <td>各属性が原子値（分割不可能）</td>
                            <td>複数値の混在による検索困難</td>
                            <td>★★★（必須）</td>
                        </tr>
                        <tr>
                            <td><strong>第2正規形</strong></td>
                            <td>部分関数従属の排除</td>
                            <td>データ重複と更新異常</td>
                            <td>★★★（必須）</td>
                        </tr>
                        <tr>
                            <td><strong>第3正規形</strong></td>
                            <td>推移関数従属の排除</td>
                            <td>間接的依存による不整合</td>
                            <td>★★☆（推奨）</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- SQL -->
        <section class="content-section">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">
                <i class="fas fa-code text-red-600 mr-2"></i>4. SQL（Structured Query Language）
            </h2>

            <div class="highlight-box mb-6">
                <h3 class="text-xl font-semibold mb-4">SQLとは</h3>
                <p class="mb-4"><strong>SQL（Structured Query Language）</strong>は、関係データベースを操作するための標準言語です。「データベースとの会話」のように、欲しいデータを取得したり、データを更新したりする命令を記述します。</p>
            </div>

            <!-- SQL基本文法 -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-700">基本的なSQL文</h3>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-2">SELECT文（データ検索）</h4>
                        <div class="code-block text-sm">
-- 基本形
SELECT 列名1, 列名2 FROM テーブル名;

-- 全列取得
SELECT * FROM 顧客;

-- 条件指定
SELECT 顧客名, メール 
FROM 顧客 
WHERE 都道府県 = '東京都';

-- 並び替え
SELECT * FROM 商品 
ORDER BY 単価 DESC;
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2">INSERT/UPDATE/DELETE文</h4>
                        <div class="code-block text-sm">
-- データ挿入
INSERT INTO 顧客 (顧客名, メール) 
VALUES ('田中太郎', 'tanaka@example.com');

-- データ更新
UPDATE 商品 
SET 単価 = 120 
WHERE 商品ID = 'P001';

-- データ削除
DELETE FROM 注文 
WHERE 注文日 < '2024-01-01';
                        </div>
                    </div>
                </div>
            </div>

            <!-- 結合とサブクエリ -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-700">高度なSQL技法</h3>
                
                <div class="mb-6">
                    <h4 class="font-semibold mb-2">テーブル結合（JOIN）</h4>
                    <div class="code-block text-sm">
-- 内部結合（INNER JOIN）
SELECT 顧客.顧客名, 注文.注文日, 注文.総額
FROM 顧客 
INNER JOIN 注文 ON 顧客.顧客ID = 注文.顧客ID;

-- 左外部結合（LEFT JOIN）
SELECT 顧客.顧客名, 注文.注文日
FROM 顧客 
LEFT JOIN 注文 ON 顧客.顧客ID = 注文.顧客ID;

-- 複数テーブル結合
SELECT c.顧客名, o.注文日, p.商品名, od.数量
FROM 顧客 c
JOIN 注文 o ON c.顧客ID = o.顧客ID
JOIN 注文明細 od ON o.注文ID = od.注文ID
JOIN 商品 p ON od.商品ID = p.商品ID;
                    </div>
                </div>

                <div class="mb-6">
                    <h4 class="font-semibold mb-2">サブクエリ（副問合せ）</h4>
                    <div class="code-block text-sm">
-- WHERE句でのサブクエリ
SELECT 顧客名 
FROM 顧客 
WHERE 顧客ID IN (
    SELECT 顧客ID FROM 注文 
    WHERE 注文日 >= '2024-01-01'
);

-- EXISTS句の利用
SELECT 顧客名 
FROM 顧客 c
WHERE EXISTS (
    SELECT 1 FROM 注文 o 
    WHERE o.顧客ID = c.顧客ID 
    AND o.総額 > 10000
);
                    </div>
                </div>

                <div class="mb-6">
                    <h4 class="font-semibold mb-2">集計関数とGROUP BY</h4>
                    <div class="code-block text-sm">
-- 基本的な集計
SELECT COUNT(*) AS 顧客数, 
       AVG(年齢) AS 平均年齢,
       MAX(年齢) AS 最高年齢
FROM 顧客;

-- グループ化
SELECT 都道府県, COUNT(*) AS 人数
FROM 顧客 
GROUP BY 都道府県
HAVING COUNT(*) >= 10
ORDER BY 人数 DESC;

-- 複雑な集計
SELECT 
    c.都道府県,
    COUNT(DISTINCT c.顧客ID) AS 顧客数,
    SUM(o.総額) AS 売上合計,
    AVG(o.総額) AS 平均注文額
FROM 顧客 c
LEFT JOIN 注文 o ON c.顧客ID = o.顧客ID
GROUP BY c.都道府県;
                    </div>
                </div>
            </div>

            <div class="table-container">
                <h3 class="text-lg font-semibold mb-4">SQL結合種類と使い分け</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>結合種類</th>
                            <th>結果</th>
                            <th>使用場面</th>
                            <th>パフォーマンス</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>INNER JOIN</strong></td>
                            <td>両テーブルに存在するレコードのみ</td>
                            <td>確実に関連するデータが欲しい場合</td>
                            <td>高速</td>
                        </tr>
                        <tr>
                            <td><strong>LEFT JOIN</strong></td>
                            <td>左テーブルの全レコード + 右の関連レコード</td>
                            <td>マスターデータと取引データの結合</td>
                            <td>中程度</td>
                        </tr>
                        <tr>
                            <td><strong>RIGHT JOIN</strong></td>
                            <td>右テーブルの全レコード + 左の関連レコード</td>
                            <td>LEFT JOINの逆（あまり使用されない）</td>
                            <td>中程度</td>
                        </tr>
                        <tr>
                            <td><strong>FULL JOIN</strong></td>
                            <td>両テーブルの全レコード</td>
                            <td>データの不整合調査</td>
                            <td>低速</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- トランザクション -->
        <section class="content-section">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">
                <i class="fas fa-shield-alt text-orange-600 mr-2"></i>5. トランザクション処理とACID特性
            </h2>

            <div class="highlight-box mb-6">
                <h3 class="text-xl font-semibold mb-4">トランザクションとは</h3>
                <p class="mb-4"><strong>トランザクション（Transaction）</strong>とは、データベースに対する一連の操作をまとめて実行する処理単位です。「銀行の送金処理」のように、複数の操作が全て成功するか、全て失敗するかのどちらかになる仕組みです。</p>
                
                <div class="code-block">
-- トランザクションの基本構文
BEGIN;  -- トランザクション開始
    UPDATE 口座 SET 残高 = 残高 - 10000 WHERE 口座番号 = 'A001';
    UPDATE 口座 SET 残高 = 残高 + 10000 WHERE 口座番号 = 'B002';
COMMIT; -- 正常終了：変更を確定

-- エラー時の処理
BEGIN;
    UPDATE 口座 SET 残高 = 残高 - 10000 WHERE 口座番号 = 'A001';
    -- エラー発生
ROLLBACK; -- 異常終了：変更を取り消し
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-700">ACID特性</h3>
                <p class="mb-4">トランザクションが満たすべき4つの重要な特性を<strong>ACID特性</strong>と呼びます。</p>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg p-6 border-l-4 border-blue-500">
                        <h4 class="font-semibold mb-2 text-blue-700">原子性（Atomicity）</h4>
                        <p class="text-sm mb-2">トランザクション内の操作は全て実行されるか、全て実行されないかのどちらか</p>
                        <div class="text-xs text-gray-600">
                            <strong>例：</strong>送金処理で「出金」と「入金」が両方成功するか、両方失敗するか
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-6 border-l-4 border-green-500">
                        <h4 class="font-semibold mb-2 text-green-700">一貫性（Consistency）</h4>
                        <p class="text-sm mb-2">トランザクション実行前後でデータベースの整合性制約が保たれる</p>
                        <div class="text-xs text-gray-600">
                            <strong>例：</strong>口座残高の合計が送金前後で変わらない
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-6 border-l-4 border-yellow-500">
                        <h4 class="font-semibold mb-2 text-yellow-700">分離性（Isolation）</h4>
                        <p class="text-sm mb-2">複数のトランザクションが同時実行されても互いに影響しない</p>
                        <div class="text-xs text-gray-600">
                            <strong>例：</strong>同じ口座への同時アクセスでも正しく処理される
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-6 border-l-4 border-red-500">
                        <h4 class="font-semibold mb-2 text-red-700">持続性（Durability）</h4>
                        <p class="text-sm mb-2">コミット後のデータはシステム障害が発生しても失われない</p>
                        <div class="text-xs text-gray-600">
                            <strong>例：</strong>送金完了後は停電が発生してもデータが保持される
                        </div>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <h3 class="text-lg font-semibold mb-4">分離レベルと問題現象</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>分離レベル</th>
                            <th>ダーティリード</th>
                            <th>ファジーリード</th>
                            <th>ファントムリード</th>
                            <th>パフォーマンス</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>READ UNCOMMITTED</strong></td>
                            <td class="text-red-600">発生する</td>
                            <td class="text-red-600">発生する</td>
                            <td class="text-red-600">発生する</td>
                            <td class="text-green-600">最高</td>
                        </tr>
                        <tr>
                            <td><strong>READ COMMITTED</strong></td>
                            <td class="text-green-600">防げる</td>
                            <td class="text-red-600">発生する</td>
                            <td class="text-red-600">発生する</td>
                            <td class="text-yellow-600">高</td>
                        </tr>
                        <tr>
                            <td><strong>REPEATABLE READ</strong></td>
                            <td class="text-green-600">防げる</td>
                            <td class="text-green-600">防げる</td>
                            <td class="text-red-600">発生する</td>
                            <td class="text-yellow-600">中</td>
                        </tr>
                        <tr>
                            <td><strong>SERIALIZABLE</strong></td>
                            <td class="text-green-600">防げる</td>
                            <td class="text-green-600">防げる</td>
                            <td class="text-green-600">防げる</td>
                            <td class="text-red-600">低</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="warning-box">
                <h4 class="font-semibold mb-2"><i class="fas fa-exclamation-triangle text-yellow-600 mr-2"></i>実務でのトランザクション設計ポイント</h4>
                <ul class="list-disc pl-6 space-y-1 text-sm">
                    <li><strong>適切な分離レベルの選択</strong>：業務要件とパフォーマンスのバランスを考慮</li>
                    <li><strong>トランザクション範囲の最小化</strong>：ロック期間を短くして同時実行性を向上</li>
                    <li><strong>デッドロック対策</strong>：テーブルアクセス順序の統一やタイムアウト設定</li>
                    <li><strong>例外処理の徹底</strong>：エラー時の確実なロールバック処理</li>
                </ul>
            </div>
        </section>

        <!-- 演習問題 -->
        <section class="content-section">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">
                <i class="fas fa-dumbbell text-purple-600 mr-2"></i>6. 演習問題
            </h2>

            <!-- 演習問題1 -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold mb-4">演習問題1: 正規化の実践</h3>
                <div class="bg-white rounded-lg p-6 border-2 border-gray-200">
                    <p class="mb-4">以下の非正規化テーブルを第3正規形まで正規化してください。</p>
                    <div class="code-block text-sm mb-4">
学生成績テーブル
学生ID | 学生名 | 学科名 | 学科長名 | 科目名   | 担当教員 | 成績
S001   | 田中   | 情報   | 佐藤     | DB,Java  | 山田,鈴木| 90,85
S002   | 高橋   | 経営   | 伊藤     | 簿記     | 中村     | 78
                    </div>
                    <button sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" onclick="showAnswer(1)" class="btn btn-primary">回答例を表示</button>
                    <div sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" id="answer1" class="answer-section">
                        <h4 class="font-semibold mb-2">正規化手順</h4>
                        <div class="space-y-4">
                            <div>
                                <h5 class="font-semibold text-blue-700">第1正規形</h5>
                                <div class="code-block text-sm">
学生成績テーブル
学生ID | 学生名 | 学科名 | 学科長名 | 科目名 | 担当教員 | 成績
S001   | 田中   | 情報   | 佐藤     | DB     | 山田     | 90
S001   | 田中   | 情報   | 佐藤     | Java   | 鈴木     | 85
S002   | 高橋   | 経営   | 伊藤     | 簿記   | 中村     | 78
                                </div>
                            </div>
                            <div>
                                <h5 class="font-semibold text-blue-700">第2正規形</h5>
                                <div class="code-block text-sm">
成績テーブル
学生ID | 科目名 | 成績
S001   | DB     | 90
S001   | Java   | 85
S002   | 簿記   | 78

学生テーブル
学生ID | 学生名 | 学科名 | 学科長名
S001   | 田中   | 情報   | 佐藤
S002   | 高橋   | 経営   | 伊藤

科目テーブル
科目名 | 担当教員
DB     | 山田
Java   | 鈴木
簿記   | 中村
                                </div>
                            </div>
                            <div>
                                <h5 class="font-semibold text-blue-700">第3正規形</h5>
                                <div class="code-block text-sm">
成績テーブル
学生ID | 科目名 | 成績

学生テーブル
学生ID | 学生名 | 学科名

学科テーブル
学科名 | 学科長名

科目テーブル
科目名 | 担当教員
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 演習問題2 -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold mb-4">演習問題2: 複合SQL文の作成</h3>
                <div class="bg-white rounded-lg p-6 border-2 border-gray-200">
                    <p class="mb-4">以下の要件を満たすSQL文を作成してください。</p>
                    <ul class="list-disc pl-6 mb-4 text-sm">
                        <li>2024年の月別売上高を表示</li>
                        <li>売上高の高い順に並び替え</li>
                        <li>売上高が100万円以上の月のみ表示</li>
                        <li>顧客名、商品名も含めて表示</li>
                    </ul>
                    <button sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" onclick="showAnswer(2)" class="btn btn-primary">回答例を表示</button>
                    <div sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" id="answer2" class="answer-section">
                        <div class="code-block text-sm">
SELECT 
    EXTRACT(MONTH FROM o.注文日) AS 月,
    SUM(od.数量 * p.単価) AS 売上高,
    COUNT(DISTINCT c.顧客ID) AS 顧客数,
    COUNT(DISTINCT p.商品ID) AS 商品種類数
FROM 注文 o
INNER JOIN 顧客 c ON o.顧客ID = c.顧客ID
INNER JOIN 注文明細 od ON o.注文ID = od.注文ID
INNER JOIN 商品 p ON od.商品ID = p.商品ID
WHERE EXTRACT(YEAR FROM o.注文日) = 2024
GROUP BY EXTRACT(MONTH FROM o.注文日)
HAVING SUM(od.数量 * p.単価) >= 1000000
ORDER BY 売上高 DESC;
                        </div>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>ポイント:</strong> EXTRACT関数で年月を抽出、JOINで複数テーブルを結合、
                            GROUP BYで月別集計、HAVINGで集計結果をフィルタリング
                        </p>
                    </div>
                </div>
            </div>

            <!-- 演習問題3 -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold mb-4">演習問題3: E-R図の作成</h3>
                <div class="bg-white rounded-lg p-6 border-2 border-gray-200">
                    <p class="mb-4">以下の業務要件からE-R図を作成してください。</p>
                    <ul class="list-disc pl-6 mb-4 text-sm">
                        <li>図書館管理システム</li>
                        <li>会員は複数の本を借りることができる</li>
                        <li>同じ本を複数の会員が借りることはできない（貸出中は1人まで）</li>
                        <li>本には著者情報があり、1人の著者が複数の本を書くことができる</li>
                        <li>貸出履歴を管理する必要がある</li>
                    </ul>
                    <button sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" onclick="showAnswer(3)" class="btn btn-primary">回答例を表示</button>
                    <div sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" id="answer3" class="answer-section">
                        <div class="er-diagram">
                            <h4 class="font-semibold mb-4">図書館管理システム E-R図</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
                                <div class="bg-blue-100 border-2 border-blue-500 rounded-lg p-4">
                                    <strong>会員</strong><br>
                                    <small>会員ID(PK)<br>会員名<br>住所<br>電話番号<br>入会日</small>
                                </div>
                                <div class="bg-green-100 border-2 border-green-500 rounded-full p-3">
                                    <strong>貸出</strong><br>
                                    <small>M:N</small>
                                </div>
                                <div class="bg-blue-100 border-2 border-blue-500 rounded-lg p-4">
                                    <strong>図書</strong><br>
                                    <small>図書ID(PK)<br>書名<br>ISBN<br>出版日<br>著者ID(FK)</small>
                                </div>
                            </div>
                            <div class="mt-6">
                                <div class="bg-blue-100 border-2 border-blue-500 rounded-lg p-4 inline-block">
                                    <strong>著者</strong><br>
                                    <small>著者ID(PK)<br>著者名<br>経歴</small>
                                </div>
                                <div class="mx-4 inline-block">1:N</div>
                                <div class="bg-blue-100 border-2 border-blue-500 rounded-lg p-4 inline-block">
                                    <strong>貸出履歴</strong><br>
                                    <small>履歴ID(PK)<br>会員ID(FK)<br>図書ID(FK)<br>貸出日<br>返却日<br>延滞フラグ</small>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 text-sm text-gray-600">
                            <p><strong>設計ポイント:</strong></p>
                            <ul class="list-disc pl-6 space-y-1">
                                <li>会員と図書の多対多関係は貸出履歴テーブルで解決</li>
                                <li>現在の貸出状況と履歴を分離して管理</li>
                                <li>著者と図書は1対多の関係</li>
                                <li>延滞管理のためのフラグを用意</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 理解度クイズ -->
        <section class="content-section">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">
                <i class="fas fa-question-circle text-indigo-600 mr-2"></i>7. 理解度確認クイズ
            </h2>

            <!-- クイズ1 -->
            <div class="mb-6">
                <h3 class="text-lg font-semibold mb-3">クイズ1: 正規化に関する問題</h3>
                <div class="bg-white rounded-lg p-6 border-2 border-gray-200">
                    <p class="mb-4">第2正規形を満たすために排除すべき従属性はどれでしょうか？</p>
                    <div class="space-y-2 mb-4">
                        <label class="flex items-center">
                            <input type="radio" name="quiz1" value="a" class="mr-2">
                            a) 完全関数従属
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="quiz1" value="b" class="mr-2">
                            b) 部分関数従属
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="quiz1" value="c" class="mr-2">
                            c) 推移関数従属
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="quiz1" value="d" class="mr-2">
                            d) 多値従属
                        </label>
                    </div>
                    <button sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" onclick="showAnswer(4)" class="btn btn-primary">回答を表示</button>
                    <div sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" id="answer4" class="answer-section">
                        <p class="font-semibold text-green-600 mb-2">正解: b) 部分関数従属</p>
                        <p class="text-sm">
                            <strong>解説:</strong> 第2正規形では、非キー属性が主キーの一部に依存する部分関数従属を排除します。
                            例えば、(注文ID, 商品ID)が主キーの場合、商品名が商品IDのみに依存するのは部分関数従属です。
                            これを排除するために、商品情報を別テーブルに分離します。
                        </p>
                    </div>
                </div>
            </div>

            <!-- クイズ2 -->
            <div class="mb-6">
                <h3 class="text-lg font-semibold mb-3">クイズ2: SQLに関する問題</h3>
                <div class="bg-white rounded-lg p-6 border-2 border-gray-200">
                    <p class="mb-4">LEFT JOINとINNER JOINの違いについて正しい説明はどれでしょうか？</p>
                    <div class="space-y-2 mb-4">
                        <label class="flex items-center">
                            <input type="radio" name="quiz2" value="a" class="mr-2">
                            a) 処理速度は常にLEFT JOINの方が速い
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="quiz2" value="b" class="mr-2">
                            b) LEFT JOINは左テーブルの全レコードを含み、右テーブルに対応するレコードがない場合はNULLを返す
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="quiz2" value="c" class="mr-2">
                            c) INNER JOINは左テーブルの全レコードを必ず含む
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="quiz2" value="d" class="mr-2">
                            d) LEFT JOINとINNER JOINの結果は常に同じになる
                        </label>
                    </div>
                    <button sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" onclick="showAnswer(5)" class="btn btn-primary">回答を表示</button>
                    <div sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" id="answer5" class="answer-section">
                        <p class="font-semibold text-green-600 mb-2">正解: b) LEFT JOINは左テーブルの全レコードを含み、右テーブルに対応するレコードがない場合はNULLを返す</p>
                        <p class="text-sm">
                            <strong>解説:</strong> LEFT JOINは左側（FROM句）のテーブルのすべてのレコードを結果に含みます。
                            右側のテーブルに対応するレコードがない場合、その部分はNULLで埋められます。
                            一方、INNER JOINは両方のテーブルに存在するレコードのみを結果に含みます。
                        </p>
                    </div>
                </div>
            </div>

            <!-- クイズ3 -->
            <div class="mb-6">
                <h3 class="text-lg font-semibold mb-3">クイズ3: トランザクションに関する問題</h3>
                <div class="bg-white rounded-lg p-6 border-2 border-gray-200">
                    <p class="mb-4">ACID特性の「I」が表す分離性（Isolation）について正しい説明はどれでしょうか？</p>
                    <div class="space-y-2 mb-4">
                        <label class="flex items-center">
                            <input type="radio" name="quiz3" value="a" class="mr-2">
                            a) トランザクションの処理が他のトランザクションから完全に見えなくなる
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="quiz3" value="b" class="mr-2">
                            b) トランザクションは必ず順次実行される
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="quiz3" value="c" class="mr-2">
                            c) 同時実行されるトランザクション同士が互いに影響を与えないように制御される
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="quiz3" value="d" class="mr-2">
                            d) トランザクションのデータは他のユーザーがアクセスできなくなる
                        </label>
                    </div>
                    <button sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" onclick="showAnswer(6)" class="btn btn-primary">回答を表示</button>
                    <div sec:authorize="hasAnyRole('ADMIN','INSTRUCTOR')" id="answer6" class="answer-section">
                        <p class="font-semibold text-green-600 mb-2">正解: c) 同時実行されるトランザクション同士が互いに影響を与えないように制御される</p>
                        <p class="text-sm">
                            <strong>解説:</strong> 分離性（Isolation）は、複数のトランザクションが同時に実行されても、
                            それぞれが独立して実行されているように見える特性です。これにより、
                            ダーティリードやファジーリードなどの問題を防ぎます。
                            分離レベルによって、どの程度まで厳密に分離するかを調整できます。
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- まとめ -->
        <section class="content-section">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">
                <i class="fas fa-check-circle text-green-600 mr-2"></i>8. 本日のまとめと次回予告
            </h2>
            
            <div class="highlight-box mb-6">
                <h3 class="text-xl font-semibold mb-4">重要ポイント復習</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-2 text-blue-700">データベース設計</h4>
                        <ul class="list-disc pl-6 space-y-1 text-sm">
                            <li>E-R図による論理設計の重要性</li>
                            <li>正規化による品質向上（第3正規形まで）</li>
                            <li>業務要件と技術仕様の橋渡し</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2 text-green-700">SQL実践技術</h4>
                        <ul class="list-disc pl-6 space-y-1 text-sm">
                            <li>複雑な結合とサブクエリの活用</li>
                            <li>集計関数とグループ化の使い分け</li>
                            <li>パフォーマンスを意識したクエリ作成</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-4">
                    <h4 class="font-semibold mb-2 text-purple-700">トランザクション管理</h4>
                    <ul class="list-disc pl-6 space-y-1 text-sm">
                        <li>ACID特性による信頼性保証</li>
                        <li>分離レベルとパフォーマンスのトレードオフ</li>
                        <li>実務でのデッドロック対策</li>
                    </ul>
                </div>
            </div>

            <div class="bg-white rounded-lg p-6 border-2 border-blue-200">
                <h3 class="text-lg font-semibold mb-3 text-blue-700">次回予告: Day24 セキュリティ基礎</h3>
                <p class="text-sm mb-3">
                    次回は情報セキュリティの基礎知識を学習します。データベースで学んだ知識を活かして、
                    データの機密性・完全性・可用性を保護する技術を習得します。
                </p>
                <ul class="list-disc pl-6 space-y-1 text-sm">
                    <li>暗号化技術（共通鍵・公開鍵暗号）</li>
                    <li>認証・認可の仕組み</li>
                    <li>SQLインジェクション等の攻撃対策</li>
                    <li>セキュリティポリシーの策定</li>
                </ul>
            </div>

            <div class="warning-box mt-6">
                <h4 class="font-semibold mb-2"><i class="fas fa-book text-blue-600 mr-2"></i>復習のポイント</h4>
                <ul class="list-disc pl-6 space-y-1 text-sm">
                    <li><strong>実践演習の重要性</strong>：実際にSQLを書いて動作確認することで理解が深まります</li>
                    <li><strong>正規化の段階的理解</strong>：各正規形が解決する問題を具体例で覚えましょう</li>
                    <li><strong>E-R図の反復練習</strong>：様々な業務要件からE-R図を作成する練習を積みましょう</li>
                    <li><strong>基本情報技術者試験対策</strong>：今日学んだ内容は試験頻出分野です</li>
                </ul>
            </div>
        </section>

        <!-- ナビゲーション -->
        <nav class="flex justify-between items-center mt-12 p-6 bg-white rounded-lg shadow-md">
            <a href="day22_lecture.html" class="btn btn-secondary flex items-center">
                <i class="fas fa-chevron-left mr-2"></i>前日: Day22 ネットワーク理論
            </a>
            <div class="text-center">
                <p class="text-sm text-gray-600">Day23 / 36</p>
                <div class="w-48 bg-gray-200 rounded-full h-2 mt-1">
                    <div class="bg-blue-600 h-2 rounded-full" style="width: 64%"></div>
                </div>
            </div>
            <a href="day24_lecture.html" class="btn btn-secondary flex items-center">
                翌日: Day24 セキュリティ基礎<i class="fas fa-chevron-right ml-2"></i>
            </a>
        </nav>
    </div>

    <!-- フッター -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-4">
                <i class="fas fa-graduation-cap mr-2"></i>
                ITエンジニア育成カリキュラム - Day23: データベース理論
            </p>
            <p class="text-sm text-gray-400">
                © 2025 APSA Co.,Ltd. All Rights Reserved.
            </p>
            <div class="mt-4 text-sm">
                <span class="mr-4">開発環境: Pleiades (Eclipse)</span>
                <span>JDK: Amazon Corretto 17</span>
            </div>
        </div>
    </footer>

    <script>
        function showAnswer(questionId) {
            const answerDiv = document.getElementById('answer' + questionId);
            const button = event.target;
            
            if (answerDiv.style.display === 'none' || answerDiv.style.display === '') {
                answerDiv.style.display = 'block';
                button.textContent = '回答を非表示';
                button.className = 'btn btn-secondary';
            } else {
                answerDiv.style.display = 'none';
                button.textContent = '回答を表示';
                button.className = 'btn btn-primary';
            }
        }

        // クイズの正答チェック機能
        function checkQuiz(quizNum, correctAnswer) {
            const selectedAnswer = document.querySelector(`input[name="quiz${quizNum}"]:checked`);
            if (selectedAnswer) {
                const resultDiv = document.getElementById(`result${quizNum}`);
                if (selectedAnswer.value === correctAnswer) {
                    resultDiv.innerHTML = '<p class="text-green-600 font-semibold">正解です！</p>';
                } else {
                    resultDiv.innerHTML = '<p class="text-red-600 font-semibold">不正解です。正解は ' + correctAnswer + ' です。</p>';
                }
            }
        }

        // ページロード時の初期化
        document.addEventListener('DOMContentLoaded', function() {
            // 全ての回答セクションを非表示に
            const answerSections = document.querySelectorAll('.answer-section');
            answerSections.forEach(section => {
                section.style.display = 'none';
            });
        });
    </script>
    </main>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDh3DISX5sHpG3FdHec%2Br3Bke5qEgH66kcVZpMz8hQCfKAhZFecLiefwdzCNTOq7Wz7YSkN4xLYzyKjYWOvULfHAi5bjgUTz8gQlJkkuAtZoILW9m4ke9UtegA9TkEgYRfh8RNiwHvJlnxn%2BA7caRtvY%2FWjHD3lzS1g6oghPUsFEfyrLB98hizonDbbqFhYSVflYRJZzljVOyXd8sOdRfeBe78lNr9nsl%2BKENQ978ldi6oUI25CEJZXHFj8a84622XzzE2yiDqIJPI0HSNtrcXERCCPadWQLhJFas4wqGZtOzKzBEpYlP86shpeLofy1qhsSha2NOHMgH4cvxEOHV9LWKnmsJzNpXwfW1W6Y%2B7I7pdZHV93ff8M5avRlFhIk8rQyV5csoebIS7f1ih8z3dlIgCBpNRDTBXh6IzTtWkWoxQkfeNWsk2EOyIlavTi7GmcH1hku8098k9lR%2BoGhs%2BPSRYKbBiuBTpJOGpIRGzX6mnQjiJQ0TUrWRi9J3qpZDtc7DZ4TUXpreFGkZHYLntiI%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDh3DISX5sHpG3FdHec+r3Bke5qEgH66kcVZpMz8hQCfKAhZFecLiefwdzCNTOq7Wz7YSkN4xLYzyKjYWOvULfHAi5bjgUTz8gQlJkkuAtZoILW9m4ke9UtegA9TkEgYRfh8RNiwHvJlnxn+A7caRtvY/WjHD3lzS1g6oghPUsFEfyrLB98hizonDbbqFhYSVflYRJZzljVOyXd8sOdRfeBe78lNr9nsl+KENQ978ldi6oUI25CEJZXHFj8a84622XzzE2yiDqIJPI0HSNtrcXERCCPadWQLhJFas4wqGZtOzKzBEpYlP86shpeLofy1qhsSha2NOHMgH4cvxEOHV9LWKnmsJzNpXwfW1W6Y+7I7pdZHV93ff8M5avRlFhIk8rQyV5csoebIS7f1ih8z3dlIgCBpNRDTBXh6IzTtWkWoxQkfeNWsk2EOyIlavTi7GmcH1hku8098k9lR+oGhs+PSRYKbBiuBTpJOGpIRGzX6mnQjiJQ0TUrWRi9J3qpZDtc7DZ4TUXpreFGkZHYLntiI=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    