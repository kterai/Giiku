<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day8: 例外処理 - 堅牢なプログラムの基盤</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .fixed-nav {
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.95);
        }
        .nav-link:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }
        .breadcrumb-separator::after {
            content: ">";
            margin: 0 8px;
            color: #9CA3AF;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <nav class="fixed top-0 left-0 right-0 z-50 fixed-nav border-b border-gray-200">
        <div class="bg-blue-600 text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-12">
                    <div class="flex items-center">
                        <i class="fas fa-graduation-cap mr-2"></i>
                        <span class="font-semibold">ITエンジニア育成カリキュラム</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="./day7_lecture.html" class="nav-link px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                            <i class="fas fa-chevron-left mr-1"></i> 前の講義
                        </a>
                        <a href="./day9_lecture.html" class="nav-link px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                            次の講義 <i class="fas fa-chevron-right ml-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-white px-4 py-3">
            <div class="max-w-7xl mx-auto">
                <div class="flex items-center justify-between">
                    <div class="flex items-center text-sm text-gray-600">
                        <a href="../../index.html" class="hover:text-blue-600"><i class="fas fa-home mr-1"></i>ホーム</a>
                        <span class="breadcrumb-separator"></span>
                        <a href="../month/month1.html" class="hover:text-blue-600">1ヶ月目: Java基礎</a>
                        <span class="breadcrumb-separator"></span>
                        <a href="../week/week2.html" class="hover:text-blue-600">2週目: オブジェクト指向プログラミング</a>
                        <span class="breadcrumb-separator"></span>
                        <span class="font-semibold text-blue-600">8日目: 例外処理</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <a href="../day/day8.html" class="inline-flex items-center px-3 py-1 border border-blue-300 rounded-md text-sm text-blue-600 hover:bg-blue-50 transition-colors">
                            <i class="fas fa-clipboard-list mr-1"></i> 本日の概要
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <main class="pt-32">
    <!-- Header -->
    <header class="bg-gradient-to-r from-red-600 to-red-700 text-white p-8 rounded-lg shadow-lg mb-8 max-w-6xl mx-auto">
        <h1 class="text-4xl font-bold mb-4">
            <i class="fas fa-exclamation-triangle mr-3"></i>
            Day8: 例外処理
        </h1>
        <p class="text-xl mb-2">堅牢なプログラムの基盤</p>
        <p class="text-lg opacity-90">所要時間: 4時間 | 対象: プログラム初級者～中級者 | JavaSilver17試験対応</p>
    </header>

    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- 学習目標 -->
        <section class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-blue-600 mb-4">
                <i class="fas fa-target mr-2"></i>
                📋 本日の学習目標
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-bold text-green-600 mb-3">🎯 知識目標</h3>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span><strong>例外処理の基本概念</strong>と重要性を完全理解</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span><strong>try-catch-finally文</strong>の正確な使用方法をマスター</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span><strong>checked例外とunchecked例外</strong>の違いを明確に把握</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                            <span><strong>例外階層</strong>とメソッドスタックトレースの仕組みを学習</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-blue-600 mb-3">💡 実務スキル</h3>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-cog text-blue-500 mt-1 mr-2"></i>
                            <span>適切な例外処理設計ができる</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-cog text-blue-500 mt-1 mr-2"></i>
                            <span>カスタム例外クラスの実装方法を習得</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-cog text-blue-500 mt-1 mr-2"></i>
                            <span>実務でのエラーハンドリングベストプラクティスを理解</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-cog text-blue-500 mt-1 mr-2"></i>
                            <span>JavaSilver試験の例外処理問題に対応できる</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-6">
                <h3 class="font-bold text-yellow-800 mb-2">🔥 今日の講義の重要性</h3>
                <p class="text-yellow-700">
                    例外処理（プログラム実行中に発生する異常状態への対処機能）はJava言語の堅牢性を支える重要な機能です。適切な例外処理によって：
                    予期せぬエラーによるプログラムのクラッシュを防止、問題が発生した場合の代替処理を実装可能、
                    デバッグ情報の提供によるトラブルシューティングの効率化、ユーザーに適切なエラーメッセージを提示することでUX向上が実現できます。
                </p>
            </div>
        </section>

        <!-- 1. 例外処理の基本概念 -->
        <section class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-red-600 mb-4">
                <i class="fas fa-exclamation-circle mr-2"></i>
                1. 例外処理の基本概念
            </h2>

            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-700 mb-3">例外（Exception）とは</h3>
                <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                    <p class="text-blue-800">
                        <strong>例外（Exception）</strong>とは、プログラムの実行中に発生する異常な状態や予期しないエラーを表すオブジェクトです。
                        例外が発生すると、通常のプログラム実行が中断され、適切な例外処理が行われない場合はプログラムが終了します。
                    </p>
                </div>

                <div class="bg-green-50 border border-green-200 p-4 rounded">
                    <h4 class="font-bold text-green-800 mb-2">🏠 日常例での理解</h4>
                    <p class="text-green-700">
                        例外処理は<strong>火災警報器</strong>のようなものです。普段は静かに動作していますが、
                        問題（火災/プログラムエラー）を検知すると警報（例外）を発し、
                        適切な対応（避難/エラー処理）を促します。
                    </p>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-700 mb-3">例外処理が必要な理由</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-red-50 border border-red-200 p-4 rounded">
                        <h4 class="font-bold text-red-800 mb-2">❌ 例外処理なしの場合</h4>
                        <ul class="text-red-700 space-y-1 text-sm">
                            <li>• プログラムが突然終了</li>
                            <li>• エラーの原因が不明</li>
                            <li>• ユーザーに不親切</li>
                            <li>• データの整合性が保たれない</li>
                        </ul>
                    </div>
                    <div class="bg-green-50 border border-green-200 p-4 rounded">
                        <h4 class="font-bold text-green-800 mb-2">✅ 例外処理ありの場合</h4>
                        <ul class="text-green-700 space-y-1 text-sm">
                            <li>• プログラムが安全に継続</li>
                            <li>• エラー情報を詳細に取得</li>
                            <li>• ユーザーに適切な案内</li>
                            <li>• 代替処理で業務継続</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bg-yellow-50 border border-yellow-200 p-4 rounded">
                <h4 class="font-bold text-yellow-800 mb-2">💡 実際の開発例</h4>
                <p class="text-yellow-700 mb-2">
                    例：ファイル読み込み処理で<code class="bg-yellow-200 px-1 rounded">FileNotFoundException</code>（ファイルが見つからない例外）が発生した場合
                </p>
                <ul class="text-yellow-700 space-y-1 text-sm ml-4">
                    <li>• エラーメッセージを表示</li>
                    <li>• デフォルトファイルを使用</li>
                    <li>• ユーザーに再選択を促す</li>
                    <li>• ログにエラー情報を記録</li>
                </ul>
            </div>
        </section>

        <!-- 2. 例外のクラス階層 -->
        <section class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-red-600 mb-4">
                <i class="fas fa-sitemap mr-2"></i>
                2. 例外のクラス階層
            </h2>

            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-700 mb-3">例外階層の全体像</h3>
                <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                    <p class="text-blue-800">
                        Javaの例外はすべて<code class="bg-blue-200 px-1 rounded">java.lang.Throwable</code>クラス（すべての例外・エラーの最上位クラス）のサブクラスです。
                        大きく次の2つに分類されます：
                    </p>
                </div>

                <!-- 階層図 -->
                <div class="bg-gray-50 border border-gray-200 p-6 rounded mb-6">
                    <div class="text-center">
                        <div class="inline-block bg-purple-200 border-2 border-purple-400 p-3 rounded font-bold">
                            Throwable
                            <div class="text-sm text-purple-600 mt-1">（すべての例外・エラーの最上位）</div>
                        </div>
                        <div class="flex justify-center mt-4 space-x-8">
                            <div class="text-center">
                                <div class="bg-red-200 border-2 border-red-400 p-3 rounded font-bold">
                                    Error
                                    <div class="text-sm text-red-600 mt-1">（システムレベル問題）</div>
                                </div>
                                <div class="text-xs text-red-600 mt-2">
                                    • OutOfMemoryError<br>
                                    • StackOverflowError
                                </div>
                            </div>
                            <div class="text-center">
                                <div class="bg-yellow-200 border-2 border-yellow-400 p-3 rounded font-bold">
                                    Exception
                                    <div class="text-sm text-yellow-600 mt-1">（アプリで対処可能）</div>
                                </div>
                                <div class="flex justify-center mt-4 space-x-4">
                                    <div class="text-center">
                                        <div class="bg-green-200 border border-green-400 p-2 rounded text-sm font-semibold">
                                            checked例外
                                            <div class="text-xs text-green-600 mt-1">事前対処必須</div>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <div class="bg-orange-200 border border-orange-400 p-2 rounded text-sm font-semibold">
                                            RuntimeException
                                            <div class="text-xs text-orange-600 mt-1">unchecked例外</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 詳細比較表 -->
            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-700 mb-3">例外分類の詳細比較</h3>
                <div class="overflow-x-auto">
                    <table class="w-full border-collapse border border-gray-300">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="border border-gray-300 p-3 text-left">分類</th>
                                <th class="border border-gray-300 p-3 text-left">日本語説明</th>
                                <th class="border border-gray-300 p-3 text-left">対処要否</th>
                                <th class="border border-gray-300 p-3 text-left">具体例</th>
                                <th class="border border-gray-300 p-3 text-left">実用場面</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-red-50">
                                <td class="border border-gray-300 p-3 font-bold text-red-700">Error</td>
                                <td class="border border-gray-300 p-3">システムレベル問題<br>（対処不可能）</td>
                                <td class="border border-gray-300 p-3">基本的に対処不可<br>システム設定見直し</td>
                                <td class="border border-gray-300 p-3">
                                    • OutOfMemoryError<br>
                                    • StackOverflowError
                                </td>
                                <td class="border border-gray-300 p-3">
                                    • メモリ不足<br>
                                    • 無限再帰呼び出し
                                </td>
                            </tr>
                            <tr class="bg-green-50">
                                <td class="border border-gray-300 p-3 font-bold text-green-700">checked例外</td>
                                <td class="border border-gray-300 p-3">事前対処必須例外<br>（コンパイル時チェック）</td>
                                <td class="border border-gray-300 p-3">try-catch必須または<br>throws宣言</td>
                                <td class="border border-gray-300 p-3">
                                    • IOException<br>
                                    • SQLException<br>
                                    • ClassNotFoundException
                                </td>
                                <td class="border border-gray-300 p-3">
                                    • ファイル読み書き<br>
                                    • データベース操作<br>
                                    • ネットワーク通信
                                </td>
                            </tr>
                            <tr class="bg-orange-50">
                                <td class="border border-gray-300 p-3 font-bold text-orange-700">unchecked例外<br>(RuntimeException)</td>
                                <td class="border border-gray-300 p-3">実行時例外<br>（プログラマーのミス）</td>
                                <td class="border border-gray-300 p-3">事前チェックで予防<br>（null判定等）</td>
                                <td class="border border-gray-300 p-3">
                                    • NullPointerException<br>
                                    • ArrayIndexOutOfBoundsException<br>
                                    • IllegalArgumentException
                                </td>
                                <td class="border border-gray-300 p-3">
                                    • null参照アクセス<br>
                                    • 配列範囲外アクセス<br>
                                    • 不正な引数渡し
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="bg-blue-50 border border-blue-200 p-4 rounded">
                <h4 class="font-bold text-blue-800 mb-2">🔍 なぜchecked例外が存在するのか</h4>
                <p class="text-blue-700">
                    checked例外（事前対処必須例外）が存在する理由は、<strong>予測可能な問題に対して事前対策を強制するため</strong>です。
                    ファイル操作やネットワーク通信など、外部要因で失敗する可能性が高い処理については、
                    コンパイル時に例外処理を書くことを強制し、堅牢なプログラムの作成を促します。
                </p>
            </div>
        </section>

        <!-- 3. try-catch-finally文 -->
        <section class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-red-600 mb-4">
                <i class="fas fa-shield-alt mr-2"></i>
                3. try-catch-finally文の使用法
            </h2>

            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-700 mb-3">基本構文</h3>
                <div class="bg-gray-900 text-green-400 p-4 rounded overflow-x-auto mb-4">
                    <pre><code class="language-java">try {
    // 例外が発生する可能性のある処理
    // （例：ファイル読み込み、データベース接続）
} catch (例外クラス名 変数名) {
    // 例外が発生した時の処理
    // （例：エラーメッセージ表示、代替処理）
} finally {
    // 例外の有無に関わらず必ず実行される処理
    // （例：リソースのクローズ、クリーンアップ）
}</code></pre>
                </div>
            </div>

            <!-- 実行順序の詳細解説 -->
            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-700 mb-3">実行順序の詳細解説</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-green-50 border border-green-200 p-4 rounded">
                        <h4 class="font-bold text-green-800 mb-2">✅ 正常時の実行順序</h4>
                        <ol class="text-green-700 space-y-1 text-sm">
                            <li>1. try ブロックを実行</li>
                            <li>2. 例外が発生しない</li>
                            <li>3. catch ブロックをスキップ</li>
                            <li>4. finally ブロックを実行</li>
                            <li>5. 処理続行</li>
                        </ol>
                    </div>
                    <div class="bg-red-50 border border-red-200 p-4 rounded">
                        <h4 class="font-bold text-red-800 mb-2">⚠️ 例外発生時の実行順序</h4>
                        <ol class="text-red-700 space-y-1 text-sm">
                            <li>1. try ブロックを実行</li>
                            <li>2. 例外が発生</li>
                            <li>3. 該当する catch ブロックを実行</li>
                            <li>4. finally ブロックを実行</li>
                            <li>5. 処理続行</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- 実践例 -->
            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-700 mb-3">実践例：ファイル読み込み処理</h3>
                <div class="bg-gray-900 text-green-400 p-4 rounded overflow-x-auto mb-4">
                    <pre><code class="language-java">import java.io.*;

public class FileReader {
    public static void main(String[] args) {
        BufferedReader reader = null;
        
        try {
            // ファイル読み込み（IOException が発生する可能性）
            reader = new BufferedReader(new java.io.FileReader("data.txt"));
            String line = reader.readLine();
            System.out.println("読み込み成功: " + line);
            
        } catch (FileNotFoundException e) {
            // ファイルが見つからない場合の処理
            System.out.println("エラー: ファイルが見つかりません");
            System.out.println("デフォルト設定を使用します");
            
        } catch (IOException e) {
            // その他のI/Oエラーの処理
            System.out.println("エラー: ファイル読み込みに失敗しました");
            e.printStackTrace(); // 詳細なエラー情報を出力
            
        } finally {
            // リソースの確実なクローズ
            if (reader != null) {
                try {
                    reader.close();
                    System.out.println("ファイルをクローズしました");
                } catch (IOException e) {
                    System.out.println("ファイルクローズに失敗");
                }
            }
        }
    }
}</code></pre>
                </div>
            </div>

            <div class="bg-yellow-50 border border-yellow-200 p-4 rounded">
                <h4 class="font-bold text-yellow-800 mb-2">💡 try-with-resources文（推奨）</h4>
                <p class="text-yellow-700 mb-2">
                    Java 7以降では、<strong>try-with-resources文</strong>（リソースの自動クローズ機能）を使用することで、
                    finally文でのクローズ処理を自動化できます：
                </p>
                <div class="bg-gray-900 text-green-400 p-3 rounded text-sm">
                    <pre><code>try (BufferedReader reader = new BufferedReader(new FileReader("data.txt"))) {
    String line = reader.readLine();
    System.out.println("読み込み成功: " + line);
} catch (IOException e) {
    System.out.println("エラー: " + e.getMessage());
}
// reader は自動的にクローズされる</code></pre>
                </div>
            </div>
        </section>

        <!-- 4. カスタム例外 -->
        <section class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-red-600 mb-4">
                <i class="fas fa-wrench mr-2"></i>
                4. カスタム例外の作成
            </h2>

            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-700 mb-3">カスタム例外の必要性</h3>
                <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                    <p class="text-blue-800">
                        業務システムでは、標準の例外クラスでは表現できない<strong>業務固有のエラー</strong>が発生します。
                        カスタム例外（独自例外クラス）を作成することで、より具体的で分かりやすいエラー処理が可能になります。
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-red-50 border border-red-200 p-4 rounded">
                        <h4 class="font-bold text-red-800 mb-2">❌ 標準例外のみの場合</h4>
                        <ul class="text-red-700 space-y-1 text-sm">
                            <li>• 汎用的すぎて原因が不明</li>
                            <li>• 業務ルール違反を表現できない</li>
                            <li>• エラー処理の分岐が困難</li>
                        </ul>
                    </div>
                    <div class="bg-green-50 border border-green-200 p-4 rounded">
                        <h4 class="font-bold text-green-800 mb-2">✅ カスタム例外ありの場合</h4>
                        <ul class="text-green-700 space-y-1 text-sm">
                            <li>• 業務固有の問題を明確に表現</li>
                            <li>• エラーの種類別に適切な処理</li>
                            <li>• 保守性と可読性が向上</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-700 mb-3">カスタム例外の実装例</h3>
                <div class="bg-gray-900 text-green-400 p-4 rounded overflow-x-auto mb-4">
                    <pre><code class="language-java">// 銀行システムの例外クラス
public class InsufficientFundsException extends Exception {
    private double amount;      // 不足金額
    private double balance;     // 現在残高
    
    public InsufficientFundsException(double amount, double balance) {
        super("残高不足: 要求額=" + amount + ", 残高=" + balance);
        this.amount = amount;
        this.balance = balance;
    }
    
    public double getAmount() { return amount; }
    public double getBalance() { return balance; }
    public double getShortfall() { return amount - balance; }
}

// 使用例
public class BankAccount {
    private double balance;
    
    public void withdraw(double amount) throws InsufficientFundsException {
        if (amount > balance) {
            throw new InsufficientFundsException(amount, balance);
        }
        balance -= amount;
        System.out.println("出金完了: " + amount + "円");
    }
}

// 呼び出し側
public static void main(String[] args) {
    BankAccount account = new BankAccount();
    
    try {
        account.withdraw(50000); // 残高以上の出金を試行
    } catch (InsufficientFundsException e) {
        System.out.println("エラー: " + e.getMessage());
        System.out.println("不足額: " + e.getShortfall() + "円");
        // 具体的な対処法を提示
        System.out.println("入金するか、金額を減らしてください");
    }
}</code></pre>
                </div>
            </div>
        </section>

        <!-- 5. 演習問題 -->
        <section class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-green-600 mb-4">
                <i class="fas fa-code mr-2"></i>
                📝 演習問題
            </h2>

            <!-- 問題1 -->
            <div class="mb-6 border border-gray-200 rounded p-4">
                <h3 class="text-lg font-bold text-gray-700 mb-3">問題1: 例外分類の理解</h3>
                <p class="text-gray-700 mb-3">
                    以下の例外を、checked例外・unchecked例外・Errorに分類し、
                    それぞれがどのような場面で発生するか説明してください。
                </p>
                <ul class="list-disc list-inside text-gray-700 mb-3">
                    <li>IOException</li>
                    <li>NullPointerException</li>
                    <li>SQLException</li>
                    <li>OutOfMemoryError</li>
                    <li>ArrayIndexOutOfBoundsException</li>
                </ul>
                
                <button onclick="showAnswer('answer1')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    回答例を表示
                </button>
                
                <div id="answer1" class="hidden mt-4 p-4 bg-green-50 border border-green-200 rounded">
                    <h4 class="font-bold text-green-800 mb-2">回答例：</h4>
                    <div class="space-y-3 text-sm">
                        <div>
                            <strong class="text-green-700">checked例外（事前対処必須）：</strong>
                            <ul class="ml-4 mt-1">
                                <li>• <code>IOException</code>: ファイル読み書き、ネットワーク通信でのI/Oエラー</li>
                                <li>• <code>SQLException</code>: データベース接続・操作時のエラー</li>
                            </ul>
                        </div>
                        <div>
                            <strong class="text-orange-700">unchecked例外（実行時例外）：</strong>
                            <ul class="ml-4 mt-1">
                                <li>• <code>NullPointerException</code>: nullオブジェクトへのメソッド呼び出し</li>
                                <li>• <code>ArrayIndexOutOfBoundsException</code>: 配列の範囲外アクセス</li>
                            </ul>
                        </div>
                        <div>
                            <strong class="text-red-700">Error（システムレベル問題）：</strong>
                            <ul class="ml-4 mt-1">
                                <li>• <code>OutOfMemoryError</code>: JVMのメモリ不足</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 問題2 -->
            <div class="mb-6 border border-gray-200 rounded p-4">
                <h3 class="text-lg font-bold text-gray-700 mb-3">問題2: try-catch-finally の実行順序</h3>
                <p class="text-gray-700 mb-3">
                    以下のコードの実行結果を予測し、finally文が実行されるタイミングを説明してください：
                </p>
                <div class="bg-gray-100 p-3 rounded text-sm font-mono mb-3">
                    <pre>try {
    System.out.println("A");
    int result = 10 / 0;  // ArithmeticException発生
    System.out.println("B");
} catch (ArithmeticException e) {
    System.out.println("C");
    return;
} finally {
    System.out.println("D");
}
System.out.println("E");</pre>
                </div>
                
                <button onclick="showAnswer('answer2')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    回答例を表示
                </button>
                
                <div id="answer2" class="hidden mt-4 p-4 bg-green-50 border border-green-200 rounded">
                    <h4 class="font-bold text-green-800 mb-2">回答例：</h4>
                    <div class="text-sm">
                        <p class="mb-2"><strong>実行結果：</strong></p>
                        <div class="bg-gray-100 p-2 rounded font-mono mb-3">
                            A<br>
                            C<br>
                            D
                        </div>
                        <p><strong>実行順序の説明：</strong></p>
                        <ol class="ml-4 mt-2">
                            <li>1. "A"を出力</li>
                            <li>2. ゼロ除算でArithmeticException発生</li>
                            <li>3. "B"はスキップされる</li>
                            <li>4. catch文で"C"を出力</li>
                            <li>5. returnが実行されるが、<strong>finally文が優先実行</strong></li>
                            <li>6. "D"を出力</li>
                            <li>7. returnでメソッド終了（"E"は出力されない）</li>
                        </ol>
                        <p class="mt-2 text-green-700">
                            <strong>重要：</strong> finally文は、return、break、continueが実行されても必ず実行されます。
                        </p>
                    </div>
                </div>
            </div>

            <!-- 問題3 -->
            <div class="border border-gray-200 rounded p-4">
                <h3 class="text-lg font-bold text-gray-700 mb-3">問題3: カスタム例外の設計</h3>
                <p class="text-gray-700 mb-3">
                    オンラインショッピングシステムで使用する「在庫不足例外」を設計してください。
                    以下の情報を含むカスタム例外クラスを作成し、使用例も示してください：
                </p>
                <ul class="list-disc list-inside text-gray-700 mb-3">
                    <li>商品名</li>
                    <li>要求数量</li>
                    <li>現在在庫数</li>
                    <li>不足数量の計算メソッド</li>
                </ul>
                
                <button onclick="showAnswer('answer3')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    回答例を表示
                </button>
                
                <div id="answer3" class="hidden mt-4 p-4 bg-green-50 border border-green-200 rounded">
                    <h4 class="font-bold text-green-800 mb-2">回答例：</h4>
                    <div class="bg-gray-900 text-green-400 p-3 rounded text-xs overflow-x-auto">
                        <pre><code>// カスタム例外クラス
public class OutOfStockException extends Exception {
    private String productName;
    private int requestedQuantity;
    private int currentStock;
    
    public OutOfStockException(String productName, int requestedQuantity, int currentStock) {
        super("在庫不足: " + productName + " (要求:" + requestedQuantity + 
              ", 在庫:" + currentStock + ")");
        this.productName = productName;
        this.requestedQuantity = requestedQuantity;
        this.currentStock = currentStock;
    }
    
    // ゲッターメソッド
    public String getProductName() { return productName; }
    public int getRequestedQuantity() { return requestedQuantity; }
    public int getCurrentStock() { return currentStock; }
    public int getShortage() { return requestedQuantity - currentStock; }
}

// 使用例
public class Product {
    private String name;
    private int stock;
    
    public void purchase(int quantity) throws OutOfStockException {
        if (quantity > stock) {
            throw new OutOfStockException(name, quantity, stock);
        }
        stock -= quantity;
        System.out.println("購入完了: " + name + " × " + quantity);
    }
}

// 呼び出し側
try {
    product.purchase(5);
} catch (OutOfStockException e) {
    System.out.println("エラー: " + e.getMessage());
    System.out.println("不足数量: " + e.getShortage() + "個");
    System.out.println("現在在庫: " + e.getCurrentStock() + "個");
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- 6. 理解度クイズ -->
        <section class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-blue-600 mb-4">
                <i class="fas fa-question-circle mr-2"></i>
                🎯 理解度クイズ（JavaSilver試験対策）
            </h2>

            <!-- クイズ1 -->
            <div class="mb-6 border border-gray-200 rounded p-4">
                <h3 class="text-lg font-bold text-gray-700 mb-3">クイズ1: 例外の分類</h3>
                <p class="text-gray-700 mb-3">
                    以下のうち、checked例外（コンパイル時に処理が必須）はどれですか？
                </p>
                <div class="space-y-2 mb-4">
                    <label class="flex items-center">
                        <input type="radio" name="quiz1" value="a" class="mr-2">
                        A. NullPointerException
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="quiz1" value="b" class="mr-2">
                        B. IOException
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="quiz1" value="c" class="mr-2">
                        C. ArithmeticException
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="quiz1" value="d" class="mr-2">
                        D. ArrayIndexOutOfBoundsException
                    </label>
                </div>
                
                <button onclick="showAnswer('quiz1_answer')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    回答を表示
                </button>
                
                <div id="quiz1_answer" class="hidden mt-4 p-4 bg-blue-50 border border-blue-200 rounded">
                    <h4 class="font-bold text-blue-800 mb-2">正解: B. IOException</h4>
                    <p class="text-blue-700 text-sm">
                        <strong>解説：</strong> IOExceptionはchecked例外で、ファイル読み書きやネットワーク通信で発生する可能性があるため、
                        コンパイル時にtry-catch文またはthrows宣言が必須です。他の選択肢はすべてRuntimeExceptionの子クラスで、
                        unchecked例外（実行時例外）です。
                    </p>
                </div>
            </div>

            <!-- クイズ2 -->
            <div class="mb-6 border border-gray-200 rounded p-4">
                <h3 class="text-lg font-bold text-gray-700 mb-3">クイズ2: finally節の実行</h3>
                <p class="text-gray-700 mb-3">
                    finally節が実行されない場合はどれですか？
                </p>
                <div class="space-y-2 mb-4">
                    <label class="flex items-center">
                        <input type="radio" name="quiz2" value="a" class="mr-2">
                        A. try節で例外が発生した場合
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="quiz2" value="b" class="mr-2">
                        B. catch節でreturnが実行された場合
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="quiz2" value="c" class="mr-2">
                        C. System.exit()が実行された場合
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="quiz2" value="d" class="mr-2">
                        D. try節が正常に実行された場合
                    </label>
                </div>
                
                <button onclick="showAnswer('quiz2_answer')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    回答を表示
                </button>
                
                <div id="quiz2_answer" class="hidden mt-4 p-4 bg-blue-50 border border-blue-200 rounded">
                    <h4 class="font-bold text-blue-800 mb-2">正解: C. System.exit()が実行された場合</h4>
                    <p class="text-blue-700 text-sm">
                        <strong>解説：</strong> finally節は、return、break、continueが実行されても必ず実行されますが、
                        System.exit()でJVMが強制終了された場合のみ実行されません。これはJavaの重要な特徴の一つです。
                    </p>
                </div>
            </div>

            <!-- クイズ3 -->
            <div class="border border-gray-200 rounded p-4">
                <h3 class="text-lg font-bold text-gray-700 mb-3">クイズ3: 複数catch節の順序</h3>
                <p class="text-gray-700 mb-3">
                    複数のcatch節を記述する際、正しい順序はどれですか？
                </p>
                <div class="space-y-2 mb-4">
                    <label class="flex items-center">
                        <input type="radio" name="quiz3" value="a" class="mr-2">
                        A. 親クラスの例外を先に記述
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="quiz3" value="b" class="mr-2">
                        B. 子クラスの例外を先に記述
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="quiz3" value="c" class="mr-2">
                        C. checked例外を先に記述
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="quiz3" value="d" class="mr-2">
                        D. 順序は関係ない
                    </label>
                </div>
                
                <button onclick="showAnswer('quiz3_answer')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    回答を表示
                </button>
                
                <div id="quiz3_answer" class="hidden mt-4 p-4 bg-blue-50 border border-blue-200 rounded">
                    <h4 class="font-bold text-blue-800 mb-2">正解: B. 子クラスの例外を先に記述</h4>
                    <div class="text-blue-700 text-sm">
                        <p class="mb-2">
                            <strong>解説：</strong> Javaでは例外をキャッチする際、上から順番にチェックします。
                            親クラスの例外を先に記述すると、子クラスの例外も親クラスでキャッチされてしまうため、
                            より具体的な例外（子クラス）を先に記述する必要があります。
                        </p>
                        <div class="bg-blue-100 p-2 rounded mt-2">
                            <strong>例：</strong><br>
                            <code>catch (FileNotFoundException e)</code> // 子クラス<br>
                            <code>catch (IOException e)</code> // 親クラス
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 7. まとめ -->
        <section class="bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold mb-4">
                <i class="fas fa-check-double mr-2"></i>
                📋 本日のまとめ
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-bold mb-3">✅ 習得した知識・技術</h3>
                    <ul class="space-y-2 text-sm">
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-300 mt-1 mr-2"></i>
                            <span><strong>try-catch-finally文</strong>で安全なファイル読み込み処理ができる</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-300 mt-1 mr-2"></i>
                            <span><strong>checked例外とunchecked例外</strong>の違いを理解し、適切に使い分けられる</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-300 mt-1 mr-2"></i>
                            <span><strong>finally文</strong>でリソースの確実な解放ができる</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-300 mt-1 mr-2"></i>
                            <span><strong>カスタム例外クラス</strong>で業務固有のエラーを表現できる</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-3">🎯 実務での活用</h3>
                    <ul class="space-y-2 text-sm">
                        <li class="flex items-start">
                            <i class="fas fa-star text-yellow-300 mt-1 mr-2"></i>
                            <span>ファイル処理・DB操作での堅牢なエラーハンドリング</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-star text-yellow-300 mt-1 mr-2"></i>
                            <span>ユーザーに分かりやすいエラーメッセージの提供</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-star text-yellow-300 mt-1 mr-2"></i>
                            <span>システム全体の可用性とユーザビリティ向上</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-star text-yellow-300 mt-1 mr-2"></i>
                            <span>保守性の高いコード設計</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="bg-blue-800 p-4 rounded mt-6">
                <h3 class="font-bold mb-2">🚀 次回予告: Day9「コレクションフレームワーク」</h3>
                <p class="text-sm">
                    複数のデータを効率的に管理するJavaコレクション（List、Set、Map）の基礎を学習し、
                    実践的なデータ処理能力を身につけます。ArrayList、HashMap等の使い分けがポイントです！
                </p>
            </div>
        </section>

        <!-- 講師向け指導ポイント -->
        <section class="bg-yellow-50 border-2 border-yellow-300 p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-yellow-600 mb-4">
                <i class="fas fa-chalkboard-teacher mr-2"></i>
                👨‍🏫 講師向け指導ポイント
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-bold text-yellow-700 mb-3">⚠️ 初心者が躓きやすいポイント</h3>
                    <ul class="space-y-2 text-sm text-yellow-800">
                        <li class="flex items-start">
                            <i class="fas fa-exclamation-triangle text-red-500 mt-1 mr-2"></i>
                            <strong>checked例外の理解不足:</strong> なぜコンパイルエラーになるかの説明を重点的に
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-exclamation-triangle text-red-500 mt-1 mr-2"></i>
                            <strong>finally節の実行タイミング:</strong> return後でも実行される点を強調
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-exclamation-triangle text-red-500 mt-1 mr-2"></i>
                            <strong>例外の再スロー:</strong> catch節でthrowする場合の注意点
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-exclamation-triangle text-red-500 mt-1 mr-2"></i>
                            <strong>リソースリーク:</strong> finally節でのクローズ処理の重要性
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-yellow-700 mb-3">💡 効果的な説明テクニック</h3>
                    <ul class="space-y-2 text-sm text-yellow-800">
                        <li class="flex items-start">
                            <i class="fas fa-lightbulb text-yellow-500 mt-1 mr-2"></i>
                            <strong>実際のエラー体験:</strong> わざと例外を発生させて対処法を学習
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-lightbulb text-yellow-500 mt-1 mr-2"></i>
                            <strong>デバッガ活用:</strong> スタックトレースの読み方を実演
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-lightbulb text-yellow-500 mt-1 mr-2"></i>
                            <strong>段階的理解:</strong> 基本→応用→実践の順で段階的に学習
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-lightbulb text-yellow-500 mt-1 mr-2"></i>
                            <strong>比喩の活用:</strong> 火災警報器などの身近な例で理解促進
                        </li>
                    </ul>
                </div>
            </div>

            <div class="bg-yellow-100 border border-yellow-300 p-4 rounded mt-6">
                <h3 class="font-bold text-yellow-800 mb-2">📚 JavaSilver試験対策指導</h3>
                <ul class="space-y-1 text-sm text-yellow-700">
                    <li>• <strong>例外階層:</strong> 継承関係と分類を図解で整理</li>
                    <li>• <strong>catch節の順序:</strong> 子クラス優先の原則を反復練習</li>
                    <li>• <strong>finally節の実行:</strong> System.exit()以外は必ず実行を強調</li>
                    <li>• <strong>throws宣言:</strong> メソッドシグネチャでの例外宣言ルール</li>
                    <li>• <strong>実践問題:</strong> try-with-resources文の書き方も含めて演習</li>
                </ul>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm mt-12">
            <p>&copy; 2025 APSA Co.,Ltd. All Rights Reserved.</p>
            <p class="mt-2">開発環境: Pleiades (Eclipse) + Amazon Corretto JDK 17</p>
        </footer>
    </div>
</main>

    <script>
        // 回答表示/非表示機能
        function showAnswer(elementId) {
            const element = document.getElementById(elementId);
            const button = event.target;
            
            if (element.classList.contains('hidden')) {
                element.classList.remove('hidden');
                button.textContent = '回答を非表示';
                button.classList.remove('bg-blue-500', 'hover:bg-blue-600');
                button.classList.add('bg-gray-500', 'hover:bg-gray-600');
            } else {
                element.classList.add('hidden');
                button.textContent = element.id.includes('quiz') ? '回答を表示' : '回答例を表示';
                button.classList.remove('bg-gray-500', 'hover:bg-gray-600');
                button.classList.add('bg-blue-500', 'hover:bg-blue-600');
            }
        }

        // ページロード時のアニメーション
        document.addEventListener('DOMContentLoaded', function() {
            // スムーズスクロール
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });

            // 進捗保存機能
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                const key = `day8_${checkbox.parentElement.textContent.trim()}`;
                checkbox.checked = localStorage.getItem(key) === 'true';
                
                checkbox.addEventListener('change', function() {
                    localStorage.setItem(key, this.checked);
                });
            });
        });
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDj8P7hAEXJHhydxDYdKrAXDTQ%2FHuyxclCNeMD46a5YIJjh9iIophT8093hJp%2FLe8rvq8t8JVB8mkJPnyf5%2BXQRcAd45yFDQxa4HOCOQKwSupz6rYfSPX39Nfb68FMfsrF2Jn%2BU3Z3JwBlaMsT0PVsFDrujEL%2FBwCD41dPR1xMR0w1A5KkdL4mMpLuvd36iWJwmHFjnBUoUIbE2aKBPq4gQZrXEl6lO%2BYywzVBWjlNv0%2BsVNVrQ2wrgl%2FTrRDlRtLB5oIBb2%2F4bwftcH2NRwiAtDvXEhX%2FWyBsAFRadq%2FVao69khk7ZNA9mS2IILJ48fWAy0GaIhoWFZgxDbdzicSpbCf2MAArUmriBrEWHh4KQD%2BqIGQmUdnjijYZzvpcHhOpbJfL3RxhUJbDjeyWraVQ0N7%2BzMWkntcEVPC9yWBdMqkLd2qxzsbtfZCHln5WGE1mJm42q8vHZFIUG56rW9cTOZVdsHsufVlBgr9rLFHZQNWyw1U3ieoSAIMEtXatgcOVA%3D%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDj8P7hAEXJHhydxDYdKrAXDTQ/HuyxclCNeMD46a5YIJjh9iIophT8093hJp/Le8rvq8t8JVB8mkJPnyf5+XQRcAd45yFDQxa4HOCOQKwSupz6rYfSPX39Nfb68FMfsrF2Jn+U3Z3JwBlaMsT0PVsFDrujEL/BwCD41dPR1xMR0w1A5KkdL4mMpLuvd36iWJwmHFjnBUoUIbE2aKBPq4gQZrXEl6lO+YywzVBWjlNv0+sVNVrQ2wrgl/TrRDlRtLB5oIBb2/4bwftcH2NRwiAtDvXEhX/WyBsAFRadq/Vao69khk7ZNA9mS2IILJ48fWAy0GaIhoWFZgxDbdzicSpbCf2MAArUmriBrEWHh4KQD+qIGQmUdnjijYZzvpcHhOpbJfL3RxhUJbDjeyWraVQ0N7+zMWkntcEVPC9yWBdMqkLd2qxzsbtfZCHln5WGE1mJm42q8vHZFIUG56rW9cTOZVdsHsufVlBgr9rLFHZQNWyw1U3ieoSAIMEtXatgcOVA==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    